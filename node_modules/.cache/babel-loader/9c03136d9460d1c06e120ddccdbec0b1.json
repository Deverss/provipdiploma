{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { OPENLOGIN_NETWORK } from '@toruslabs/openlogin';\nimport { SafeEventEmitter } from '@toruslabs/openlogin-jrpc';\nimport { CustomError } from 'ts-custom-error';\nimport { post } from '@toruslabs/http-helpers';\nimport JwtDecode from 'jwt-decode';\nimport loglevel from 'loglevel';\nconst CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\"\n};\nconst ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  MULTICHAIN: \"multichain\"\n};\n\nconst getDefaultNetworkId = chainNamespace => {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n\n  throw new Error(`Chain namespace ${chainNamespace} is not supported`);\n};\n\nconst getEvmChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.EIP155;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: `https://rpc.ankr.com/eth`,\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 5) {\n    return {\n      chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: `https://rpc.ankr.com/eth_goerli`,\n      displayName: \"Goerli Testnet\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 11155111) {\n    return {\n      chainNamespace,\n      chainId: \"0xaa36a7\",\n      rpcTarget: `https://rpc.ankr.com/eth_sepolia`,\n      displayName: \"Sepolia Testnet\",\n      blockExplorer: \"https://sepolia.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 137) {\n    return {\n      chainNamespace,\n      chainId: \"0x89\",\n      rpcTarget: \"https://rpc.ankr.com/polygon\",\n      displayName: \"Polygon Mainnet\",\n      blockExplorer: \"https://polygonscan.com\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\"\n    };\n  }\n\n  if (chainId === 80001) {\n    return {\n      chainNamespace,\n      chainId: \"0x13881\",\n      rpcTarget: \"https://rpc.ankr.com/polygon_mumbai\",\n      displayName: \"Polygon Mumbai Testnet\",\n      blockExplorer: \"https://mumbai.polygonscan.com/\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 56) {\n    return {\n      chainNamespace,\n      chainId: \"0x38\",\n      rpcTarget: \"https://rpc.ankr.com/bsc\",\n      displayName: \"Binance SmartChain Mainnet\",\n      blockExplorer: \"https://bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 97) {\n    return {\n      chainNamespace,\n      chainId: \"0x61\",\n      rpcTarget: \"https://rpc.ankr.com/bsc_testnet_chapel\",\n      displayName: \"Binance SmartChain Testnet\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 25) {\n    return {\n      chainNamespace,\n      chainId: \"0x19\",\n      rpcTarget: \"https://rpc.cronos.org\",\n      displayName: \"Cronos Mainnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\"\n    };\n  }\n\n  if (chainId === 338) {\n    return {\n      chainNamespace,\n      chainId: \"0x152\",\n      rpcTarget: \"https://rpc-t3.cronos.org/\",\n      displayName: \"Cronos Testnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\",\n      decimals: 18\n    };\n  }\n\n  if (chainId === 8217) {\n    return {\n      chainNamespace,\n      chainId: \"0x2019\",\n      rpcTarget: \"https://public-node-api.klaytnapi.com/v1/cypress\",\n      displayName: \"Klaytn Mainnet\",\n      blockExplorer: \"https://scope.klaytn.com\",\n      ticker: \"KLAY\",\n      tickerName: \"Klaytn\",\n      decimals: 18\n    };\n  }\n\n  return null;\n};\n\nconst getSolanaChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.SOLANA;\n\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/solana\",\n      displayName: \"Solana Mainnet\",\n      blockExplorer: \"https://explorer.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  } else if (chainId === 2) {\n    return {\n      chainNamespace,\n      chainId: \"0x2\",\n      rpcTarget: \"https://api.testnet.solana.com\",\n      displayName: \"Solana Testnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://api.devnet.solana.com\",\n      displayName: \"Solana Devnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  }\n\n  return null;\n};\n\nconst getChainConfig = (chainNamespace, chainId) => {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  const finalChainId = chainId ? typeof chainId === \"number\" ? chainId : parseInt(chainId, 16) : getDefaultNetworkId(chainNamespace);\n\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n\n  return null;\n};\n\nclass Web3AuthError extends CustomError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(message);\n\n    _defineProperty(this, \"code\", void 0);\n\n    _defineProperty(this, \"message\", void 0);\n\n    this.code = code;\n    this.message = message || \"\"; // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"Web3AuthError\"\n    });\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message\n    };\n  }\n\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n\n}\n\nclass WalletInitializationError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletInitializationError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletInitializationError(code, `${WalletInitializationError.messages[code]}, ${extraMessage}`);\n  } // Custom methods\n\n\n  static notFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5001, extraMessage);\n  }\n\n  static notInstalled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5002, extraMessage);\n  }\n\n  static notReady() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5003, extraMessage);\n  }\n\n  static windowBlocked() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5004, extraMessage);\n  }\n\n  static windowClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5005, extraMessage);\n  }\n\n  static incompatibleChainNameSpace() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5006, extraMessage);\n  }\n\n  static duplicateAdapterError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5007, extraMessage);\n  }\n\n  static invalidProviderConfigError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5008, extraMessage);\n  }\n\n  static providerNotReadyError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5009, extraMessage);\n  }\n\n  static rpcConnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5010, extraMessage);\n  }\n\n  static invalidParams() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5011, extraMessage);\n  }\n\n  static invalidNetwork() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5013, extraMessage);\n  }\n\n}\n/**\n * wallet login errors\n */\n\n\n_defineProperty(WalletInitializationError, \"messages\", {\n  5000: \"Custom\",\n  5001: \"Wallet is not found\",\n  5002: \"Wallet is not installed\",\n  5003: \"Wallet is not ready yet\",\n  5004: \"Wallet window is blocked\",\n  5005: \"Wallet window has been closed by the user\",\n  5006: \"Incompatible chain namespace provided\",\n  5007: \"Adapter has already been included\",\n  5008: \"Invalid provider Config\",\n  5009: \"Provider is not ready yet\",\n  5010: \"Failed to connect with rpc url\",\n  5011: \"Invalid params passed in\",\n  5013: \"Invalid network provided\"\n});\n\nclass WalletLoginError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletLoginError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletLoginError(code, `${WalletLoginError.messages[code]}. ${extraMessage}`);\n  }\n\n  static connectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5111, extraMessage);\n  }\n\n  static disconnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5112, extraMessage);\n  }\n\n  static notConnectedError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5113, extraMessage);\n  }\n\n  static popupClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5114, extraMessage);\n  }\n\n  static mfaEnabled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5115, extraMessage);\n  }\n\n  static chainConfigNotAdded() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5116, extraMessage);\n  }\n\n  static unsupportedOperation() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5117, extraMessage);\n  }\n\n  static coreKitKeyNotFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5118, extraMessage);\n  }\n\n}\n\n_defineProperty(WalletLoginError, \"messages\", {\n  5000: \"Custom\",\n  5111: \"Failed to connect with wallet\",\n  5112: \"Failed to disconnect from wallet\",\n  5113: \"Wallet is not connected\",\n  5114: \"Wallet popup has been closed by the user\",\n  5115: \"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa\",\n  5116: \"Chain config has not been added. Please add the chain config before calling switchChain\",\n  5117: \"Unsupported operation\",\n  5118: \"useCoreKitKey flag is enabled but coreKitKey is not available\"\n});\n\nclass WalletOperationsError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message); // Set name explicitly as minification can mangle class names\n\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletOperationsError\"\n    });\n  }\n\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletOperationsError(code, `${WalletOperationsError.messages[code]}, ${extraMessage}`);\n  } // Custom methods\n\n\n  static chainIDNotAllowed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletOperationsError.fromCode(5201, extraMessage);\n  }\n\n  static operationNotAllowed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletOperationsError.fromCode(5202, extraMessage);\n  }\n\n}\n\n_defineProperty(WalletOperationsError, \"messages\", {\n  5000: \"Custom\",\n  5201: \"Provided chainId is not allowed\",\n  5202: \"This operation is not allowed\"\n});\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V1: \"wallet-connect-v1\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\"\n};\n\nconst SOLANA_ADAPTERS = _objectSpread$1({\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\"\n}, MULTI_CHAIN_ADAPTERS);\n\nconst EVM_ADAPTERS = _objectSpread$1({\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\"\n}, MULTI_CHAIN_ADAPTERS);\n\nconst WALLET_ADAPTERS = _objectSpread$1(_objectSpread$1({}, EVM_ADAPTERS), SOLANA_ADAPTERS);\n\nconst ADAPTER_NAMES = {\n  [MULTI_CHAIN_ADAPTERS.OPENLOGIN]: \"OpenLogin\",\n  [MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V1]: \"Wallet Connect v1\",\n  [MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V2]: \"Wallet Connect v2\",\n  [SOLANA_ADAPTERS.TORUS_SOLANA]: \"Torus\",\n  [SOLANA_ADAPTERS.PHANTOM]: \"Phantom\",\n  [SOLANA_ADAPTERS.SOLFLARE]: \"Solflare\",\n  [SOLANA_ADAPTERS.SLOPE]: \"Slope\",\n  [EVM_ADAPTERS.TORUS_EVM]: \"Torus\",\n  [EVM_ADAPTERS.METAMASK]: \"Metamask\",\n  [EVM_ADAPTERS.COINBASE]: \"Coinbase\"\n};\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\"\n};\nconst ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\"\n};\n\nconst ADAPTER_EVENTS = _objectSpread(_objectSpread({}, ADAPTER_STATUS), {}, {\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\",\n  CACHE_CLEAR: \"cache_clear\"\n});\n\nclass BaseAdapter extends SafeEventEmitter {\n  // should be added in constructor or from setAdapterSettings function\n  // before calling init function.\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n\n    _defineProperty(this, \"adapterData\", {});\n\n    _defineProperty(this, \"sessionTime\", 86400);\n\n    _defineProperty(this, \"clientId\", void 0);\n\n    _defineProperty(this, \"web3AuthNetwork\", OPENLOGIN_NETWORK.MAINNET);\n\n    _defineProperty(this, \"rehydrated\", false);\n\n    _defineProperty(this, \"chainConfig\", null);\n\n    _defineProperty(this, \"knownChainConfigs\", {});\n\n    this.setAdapterSettings(options);\n  }\n\n  get chainConfigProxy() {\n    return this.chainConfig ? _objectSpread({}, this.chainConfig) : null;\n  }\n\n  setAdapterSettings(options) {\n    if (this.status === ADAPTER_STATUS.READY) return;\n\n    if (options !== null && options !== void 0 && options.sessionTime) {\n      this.sessionTime = options.sessionTime;\n    }\n\n    if (options !== null && options !== void 0 && options.clientId) {\n      this.clientId = options.clientId;\n    }\n\n    if (options !== null && options !== void 0 && options.web3AuthNetwork) {\n      this.web3AuthNetwork = options.web3AuthNetwork;\n    }\n\n    const customChainConfig = options.chainConfig;\n\n    if (customChainConfig) {\n      if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n      this.currentChainNamespace = customChainConfig.chainNamespace; // chainId is optional in this function.\n      // we go with mainnet chainId by default.\n\n      const defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId); // NOTE: It is being forced casted to CustomChainConfig to handle OTHER Chainnamespace\n      // where chainConfig is not required.\n\n      const finalChainConfig = _objectSpread(_objectSpread({}, defaultChainConfig || {}), customChainConfig);\n\n      this.chainConfig = finalChainConfig;\n      this.addChainConfig(finalChainConfig);\n    }\n  }\n\n  checkConnectionRequirements() {\n    // we reconnect without killing existing wallet connect session on calling connect again.\n    if ((this.name === WALLET_ADAPTERS.WALLET_CONNECT_V1 || this.name === WALLET_ADAPTERS.WALLET_CONNECT_V2) && this.status === ADAPTER_STATUS.CONNECTING) return;else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n    if (this.status !== ADAPTER_STATUS.READY) throw WalletLoginError.connectionError(\"Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function\");\n  }\n\n  checkInitializationRequirements() {\n    if (!this.clientId) throw WalletInitializationError.invalidParams(\"Please initialize Web3Auth with a valid clientId in constructor\");\n    if (!this.chainConfig) throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n\n    if (!this.chainConfig.rpcTarget && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n    }\n\n    if (!this.chainConfig.chainId && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"chainID is required in chainConfig\");\n    }\n\n    if (this.status === ADAPTER_STATUS.NOT_READY) return;\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n\n  checkDisconnectionRequirements() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.disconnectionError(\"Not connected with wallet\");\n  }\n\n  checkAddChainRequirements() {\n    let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n  }\n\n  checkSwitchChainRequirements(_ref) {\n    let {\n      chainId\n    } = _ref;\n    let init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n    if (!this.knownChainConfigs[chainId]) throw WalletLoginError.chainConfigNotAdded(\"Invalid chainId\");\n  }\n\n  updateAdapterData(data) {\n    this.adapterData = data;\n    this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, {\n      adapterName: this.name,\n      data\n    });\n  }\n\n  addChainConfig(chainConfig) {\n    const currentConfig = this.knownChainConfigs[chainConfig.chainId];\n    this.knownChainConfigs[chainConfig.chainId] = _objectSpread(_objectSpread({}, currentConfig || {}), chainConfig);\n  }\n\n  getChainConfig(chainId) {\n    return this.knownChainConfigs[chainId] || null;\n  }\n\n}\n\nclass BaseNetworkSwitch {}\n\nconst authServer = \"https://authjs.web3auth.io\";\nvar log = loglevel.getLogger(\"web3auth-logger\");\n\nfunction storageAvailable(type) {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage;\n\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    const _error = error;\n    return !!(_error && ( // everything except Firefox\n    _error.code === 22 || // Firefox\n    _error.code === 1014 || // test name field too, because code might not be present\n    // everything except Firefox\n    _error.name === \"QuotaExceededError\" || // Firefox\n    _error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") && // acknowledge QuotaExceededError only if there's something already stored\n    storageExists && storageLength !== 0);\n  }\n}\n\nconst isHexStrict = hex => {\n  return (typeof hex === \"string\" || typeof hex === \"number\") && /^(-)?0x[0-9a-f]*$/i.test(hex);\n};\n\nconst checkIfTokenIsExpired = token => {\n  const decoded = JwtDecode(token);\n\n  if (!decoded.exp) {\n    return true;\n  }\n\n  if (decoded.exp < Math.floor(Date.now() / 1000)) {\n    return true;\n  }\n\n  return false;\n};\n\nconst signChallenge = async (payload, chainNamespace) => {\n  const t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n  const header = {\n    t\n  };\n  const network = chainNamespace === \"solana\" ? \"solana\" : \"ethereum\";\n  const data = {\n    payload,\n    header,\n    network\n  };\n  const res = await post(`${authServer}/siww/get`, data);\n\n  if (!res.success) {\n    throw new Error(\"Failed to authenticate user, Please reach out to Web3Auth Support team\");\n  }\n\n  return res.challenge;\n};\n\nconst verifySignedChallenge = async (chainNamespace, signedMessage, challenge, issuer, sessionTime, clientId, web3AuthNetwork) => {\n  const t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n  const sigData = {\n    signature: {\n      s: signedMessage,\n      t\n    },\n    message: challenge,\n    issuer,\n    audience: window.location.hostname,\n    timeout: sessionTime\n  };\n  const idTokenRes = await post(`${authServer}/siww/verify`, sigData, {\n    headers: {\n      client_id: clientId,\n      wallet_provider: issuer,\n      web3auth_network: web3AuthNetwork\n    }\n  });\n\n  if (!idTokenRes.success) {\n    log.error(\"Failed to authenticate user, ,message verification failed\", idTokenRes.error);\n    throw new Error(\"Failed to authenticate user, ,message verification failed\");\n  }\n\n  return idTokenRes.token;\n};\n\nconst getSavedToken = (userAddress, issuer) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.getItem(`${userAddress.toLowerCase()}_${issuer}`);\n  }\n\n  return null;\n};\n\nconst saveToken = (userAddress, issuer, token) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.setItem(`${userAddress.toLowerCase()}_${issuer}`, token);\n  }\n\n  return null;\n};\n\nconst clearToken = (userAddress, issuer) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.removeItem(`${userAddress.toLowerCase()}_${issuer}`);\n  }\n\n  return null;\n};\n\nconst PROVIDER_EVENTS = {\n  INITIALIZED: \"initialized\",\n  ERRORED: \"errored\"\n};\nexport { ADAPTER_CATEGORY, ADAPTER_EVENTS, ADAPTER_NAMES, ADAPTER_NAMESPACES, ADAPTER_STATUS, BaseAdapter, BaseNetworkSwitch, CHAIN_NAMESPACES, EVM_ADAPTERS, MULTI_CHAIN_ADAPTERS, PROVIDER_EVENTS, SOLANA_ADAPTERS, WALLET_ADAPTERS, WalletInitializationError, WalletLoginError, WalletOperationsError, Web3AuthError, authServer, checkIfTokenIsExpired, clearToken, getChainConfig, getEvmChainConfig, getSavedToken, getSolanaChainConfig, isHexStrict, log, saveToken, signChallenge, storageAvailable, verifySignedChallenge };","map":{"version":3,"sources":["../src/chain/IChainInterface.ts","../src/chain/config.ts","../src/errors/index.ts","../src/wallet/index.ts","../src/adapter/IAdapter.ts","../src/constants.ts","../src/loglevel.ts","../src/utils.ts","../src/adapter/utils.ts","../src/provider/IProvider.ts"],"names":["CHAIN_NAMESPACES","EIP155","SOLANA","OTHER","ADAPTER_NAMESPACES","MULTICHAIN","getDefaultNetworkId","chainNamespace","Error","getEvmChainConfig","chainId","rpcTarget","displayName","blockExplorer","ticker","tickerName","decimals","getSolanaChainConfig","getChainConfig","finalChainId","parseInt","Web3AuthError","CustomError","constructor","message","_defineProperty","code","Object","defineProperty","value","toJSON","name","toString","JSON","stringify","WalletInitializationError","fromCode","extraMessage","messages","notFound","notInstalled","notReady","windowBlocked","windowClosed","incompatibleChainNameSpace","duplicateAdapterError","invalidProviderConfigError","providerNotReadyError","rpcConnectionError","invalidParams","invalidNetwork","WalletLoginError","connectionError","disconnectionError","notConnectedError","popupClosed","mfaEnabled","chainConfigNotAdded","unsupportedOperation","coreKitKeyNotFound","WalletOperationsError","chainIDNotAllowed","operationNotAllowed","MULTI_CHAIN_ADAPTERS","OPENLOGIN","WALLET_CONNECT_V1","WALLET_CONNECT_V2","SOLANA_ADAPTERS","TORUS_SOLANA","PHANTOM","SOLFLARE","SLOPE","EVM_ADAPTERS","TORUS_EVM","METAMASK","COINBASE","WALLET_ADAPTERS","ADAPTER_NAMES","ADAPTER_CATEGORY","EXTERNAL","IN_APP","ADAPTER_STATUS","NOT_READY","READY","CONNECTING","CONNECTED","DISCONNECTED","ERRORED","ADAPTER_EVENTS","ADAPTER_DATA_UPDATED","CACHE_CLEAR","BaseAdapter","SafeEventEmitter","OPENLOGIN_NETWORK","MAINNET","options","setAdapterSettings","chainConfigProxy","chainConfig","status","sessionTime","clientId","web3AuthNetwork","customChainConfig","currentChainNamespace","defaultChainConfig","finalChainConfig","addChainConfig","checkConnectionRequirements","checkInitializationRequirements","checkDisconnectionRequirements","checkAddChainRequirements","init","provider","checkSwitchChainRequirements","knownChainConfigs","updateAdapterData","data","adapterData","emit","adapterName","currentConfig","BaseNetworkSwitch","authServer","loglevel","getLogger","storageAvailable","type","storageExists","storageLength","storage","window","length","x","setItem","removeItem","error","_error","isHexStrict","hex","test","checkIfTokenIsExpired","token","decoded","JwtDecode","exp","Math","floor","Date","now","signChallenge","payload","t","header","network","res","post","success","challenge","verifySignedChallenge","signedMessage","issuer","sigData","signature","s","audience","location","hostname","timeout","idTokenRes","headers","client_id","wallet_provider","web3auth_network","log","getSavedToken","userAddress","localStorage","getItem","toLowerCase","saveToken","clearToken","PROVIDER_EVENTS","INITIALIZED"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { OPENLOGIN_NETWORK } from '@toruslabs/openlogin';\nimport { SafeEventEmitter } from '@toruslabs/openlogin-jrpc';\nimport { CustomError } from 'ts-custom-error';\nimport { post } from '@toruslabs/http-helpers';\nimport JwtDecode from 'jwt-decode';\nimport loglevel from 'loglevel';\n\nconst CHAIN_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  OTHER: \"other\"\n};\nconst ADAPTER_NAMESPACES = {\n  EIP155: \"eip155\",\n  SOLANA: \"solana\",\n  MULTICHAIN: \"multichain\"\n};\n\nconst getDefaultNetworkId = chainNamespace => {\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return 1;\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return 1;\n  }\n  throw new Error(`Chain namespace ${chainNamespace} is not supported`);\n};\nconst getEvmChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.EIP155;\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: `https://rpc.ankr.com/eth`,\n      displayName: \"Ethereum Mainnet\",\n      blockExplorer: \"https://etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n  if (chainId === 5) {\n    return {\n      chainNamespace,\n      chainId: \"0x5\",\n      rpcTarget: `https://rpc.ankr.com/eth_goerli`,\n      displayName: \"Goerli Testnet\",\n      blockExplorer: \"https://goerli.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n  if (chainId === 11155111) {\n    return {\n      chainNamespace,\n      chainId: \"0xaa36a7\",\n      rpcTarget: `https://rpc.ankr.com/eth_sepolia`,\n      displayName: \"Sepolia Testnet\",\n      blockExplorer: \"https://sepolia.etherscan.io/\",\n      ticker: \"ETH\",\n      tickerName: \"Ethereum\",\n      decimals: 18\n    };\n  }\n  if (chainId === 137) {\n    return {\n      chainNamespace,\n      chainId: \"0x89\",\n      rpcTarget: \"https://rpc.ankr.com/polygon\",\n      displayName: \"Polygon Mainnet\",\n      blockExplorer: \"https://polygonscan.com\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\"\n    };\n  }\n  if (chainId === 80001) {\n    return {\n      chainNamespace,\n      chainId: \"0x13881\",\n      rpcTarget: \"https://rpc.ankr.com/polygon_mumbai\",\n      displayName: \"Polygon Mumbai Testnet\",\n      blockExplorer: \"https://mumbai.polygonscan.com/\",\n      ticker: \"MATIC\",\n      tickerName: \"Polygon\",\n      decimals: 18\n    };\n  }\n  if (chainId === 56) {\n    return {\n      chainNamespace,\n      chainId: \"0x38\",\n      rpcTarget: \"https://rpc.ankr.com/bsc\",\n      displayName: \"Binance SmartChain Mainnet\",\n      blockExplorer: \"https://bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18\n    };\n  }\n  if (chainId === 97) {\n    return {\n      chainNamespace,\n      chainId: \"0x61\",\n      rpcTarget: \"https://rpc.ankr.com/bsc_testnet_chapel\",\n      displayName: \"Binance SmartChain Testnet\",\n      blockExplorer: \"https://testnet.bscscan.com\",\n      ticker: \"BNB\",\n      tickerName: \"Binance SmartChain\",\n      decimals: 18\n    };\n  }\n  if (chainId === 25) {\n    return {\n      chainNamespace,\n      chainId: \"0x19\",\n      rpcTarget: \"https://rpc.cronos.org\",\n      displayName: \"Cronos Mainnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\"\n    };\n  }\n  if (chainId === 338) {\n    return {\n      chainNamespace,\n      chainId: \"0x152\",\n      rpcTarget: \"https://rpc-t3.cronos.org/\",\n      displayName: \"Cronos Testnet\",\n      blockExplorer: \"https://cronoscan.com/\",\n      ticker: \"CRO\",\n      tickerName: \"Cronos\",\n      decimals: 18\n    };\n  }\n  if (chainId === 8217) {\n    return {\n      chainNamespace,\n      chainId: \"0x2019\",\n      rpcTarget: \"https://public-node-api.klaytnapi.com/v1/cypress\",\n      displayName: \"Klaytn Mainnet\",\n      blockExplorer: \"https://scope.klaytn.com\",\n      ticker: \"KLAY\",\n      tickerName: \"Klaytn\",\n      decimals: 18\n    };\n  }\n  return null;\n};\nconst getSolanaChainConfig = chainId => {\n  const chainNamespace = CHAIN_NAMESPACES.SOLANA;\n  if (chainId === 1) {\n    return {\n      chainNamespace,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/solana\",\n      displayName: \"Solana Mainnet\",\n      blockExplorer: \"https://explorer.solana.com\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  } else if (chainId === 2) {\n    return {\n      chainNamespace,\n      chainId: \"0x2\",\n      rpcTarget: \"https://api.testnet.solana.com\",\n      displayName: \"Solana Testnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=testnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  } else if (chainId === 3) {\n    return {\n      chainNamespace,\n      chainId: \"0x3\",\n      rpcTarget: \"https://api.devnet.solana.com\",\n      displayName: \"Solana Devnet\",\n      blockExplorer: \"https://explorer.solana.com?cluster=devnet\",\n      ticker: \"SOL\",\n      tickerName: \"Solana\",\n      decimals: 9\n    };\n  }\n  return null;\n};\nconst getChainConfig = (chainNamespace, chainId) => {\n  if (chainNamespace === CHAIN_NAMESPACES.OTHER) return null;\n  const finalChainId = chainId ? typeof chainId === \"number\" ? chainId : parseInt(chainId, 16) : getDefaultNetworkId(chainNamespace);\n  if (chainNamespace === CHAIN_NAMESPACES.EIP155) {\n    return getEvmChainConfig(finalChainId);\n  } else if (chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n    return getSolanaChainConfig(finalChainId);\n  }\n  return null;\n};\n\nclass Web3AuthError extends CustomError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(message);\n    _defineProperty(this, \"code\", void 0);\n    _defineProperty(this, \"message\", void 0);\n    this.code = code;\n    this.message = message || \"\";\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", {\n      value: \"Web3AuthError\"\n    });\n  }\n  toJSON() {\n    return {\n      name: this.name,\n      code: this.code,\n      message: this.message\n    };\n  }\n  toString() {\n    return JSON.stringify(this.toJSON());\n  }\n}\nclass WalletInitializationError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message);\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletInitializationError\"\n    });\n  }\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletInitializationError(code, `${WalletInitializationError.messages[code]}, ${extraMessage}`);\n  }\n  // Custom methods\n  static notFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5001, extraMessage);\n  }\n  static notInstalled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5002, extraMessage);\n  }\n  static notReady() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5003, extraMessage);\n  }\n  static windowBlocked() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5004, extraMessage);\n  }\n  static windowClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5005, extraMessage);\n  }\n  static incompatibleChainNameSpace() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5006, extraMessage);\n  }\n  static duplicateAdapterError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5007, extraMessage);\n  }\n  static invalidProviderConfigError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5008, extraMessage);\n  }\n  static providerNotReadyError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5009, extraMessage);\n  }\n  static rpcConnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5010, extraMessage);\n  }\n  static invalidParams() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5011, extraMessage);\n  }\n  static invalidNetwork() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletInitializationError.fromCode(5013, extraMessage);\n  }\n}\n/**\n * wallet login errors\n */\n_defineProperty(WalletInitializationError, \"messages\", {\n  5000: \"Custom\",\n  5001: \"Wallet is not found\",\n  5002: \"Wallet is not installed\",\n  5003: \"Wallet is not ready yet\",\n  5004: \"Wallet window is blocked\",\n  5005: \"Wallet window has been closed by the user\",\n  5006: \"Incompatible chain namespace provided\",\n  5007: \"Adapter has already been included\",\n  5008: \"Invalid provider Config\",\n  5009: \"Provider is not ready yet\",\n  5010: \"Failed to connect with rpc url\",\n  5011: \"Invalid params passed in\",\n  5013: \"Invalid network provided\"\n});\nclass WalletLoginError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message);\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletLoginError\"\n    });\n  }\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletLoginError(code, `${WalletLoginError.messages[code]}. ${extraMessage}`);\n  }\n  static connectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5111, extraMessage);\n  }\n  static disconnectionError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5112, extraMessage);\n  }\n  static notConnectedError() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5113, extraMessage);\n  }\n  static popupClosed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5114, extraMessage);\n  }\n  static mfaEnabled() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5115, extraMessage);\n  }\n  static chainConfigNotAdded() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5116, extraMessage);\n  }\n  static unsupportedOperation() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5117, extraMessage);\n  }\n  static coreKitKeyNotFound() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletLoginError.fromCode(5118, extraMessage);\n  }\n}\n_defineProperty(WalletLoginError, \"messages\", {\n  5000: \"Custom\",\n  5111: \"Failed to connect with wallet\",\n  5112: \"Failed to disconnect from wallet\",\n  5113: \"Wallet is not connected\",\n  5114: \"Wallet popup has been closed by the user\",\n  5115: \"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa\",\n  5116: \"Chain config has not been added. Please add the chain config before calling switchChain\",\n  5117: \"Unsupported operation\",\n  5118: \"useCoreKitKey flag is enabled but coreKitKey is not available\"\n});\nclass WalletOperationsError extends Web3AuthError {\n  constructor(code, message) {\n    // takes care of stack and proto\n    super(code, message);\n    // Set name explicitly as minification can mangle class names\n    Object.defineProperty(this, \"name\", {\n      value: \"WalletOperationsError\"\n    });\n  }\n  static fromCode(code) {\n    let extraMessage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    return new WalletOperationsError(code, `${WalletOperationsError.messages[code]}, ${extraMessage}`);\n  }\n  // Custom methods\n  static chainIDNotAllowed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletOperationsError.fromCode(5201, extraMessage);\n  }\n  static operationNotAllowed() {\n    let extraMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n    return WalletOperationsError.fromCode(5202, extraMessage);\n  }\n}\n_defineProperty(WalletOperationsError, \"messages\", {\n  5000: \"Custom\",\n  5201: \"Provided chainId is not allowed\",\n  5202: \"This operation is not allowed\"\n});\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst MULTI_CHAIN_ADAPTERS = {\n  OPENLOGIN: \"openlogin\",\n  WALLET_CONNECT_V1: \"wallet-connect-v1\",\n  WALLET_CONNECT_V2: \"wallet-connect-v2\"\n};\nconst SOLANA_ADAPTERS = _objectSpread$1({\n  TORUS_SOLANA: \"torus-solana\",\n  PHANTOM: \"phantom\",\n  SOLFLARE: \"solflare\",\n  SLOPE: \"slope\"\n}, MULTI_CHAIN_ADAPTERS);\nconst EVM_ADAPTERS = _objectSpread$1({\n  TORUS_EVM: \"torus-evm\",\n  METAMASK: \"metamask\",\n  COINBASE: \"coinbase\"\n}, MULTI_CHAIN_ADAPTERS);\nconst WALLET_ADAPTERS = _objectSpread$1(_objectSpread$1({}, EVM_ADAPTERS), SOLANA_ADAPTERS);\nconst ADAPTER_NAMES = {\n  [MULTI_CHAIN_ADAPTERS.OPENLOGIN]: \"OpenLogin\",\n  [MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V1]: \"Wallet Connect v1\",\n  [MULTI_CHAIN_ADAPTERS.WALLET_CONNECT_V2]: \"Wallet Connect v2\",\n  [SOLANA_ADAPTERS.TORUS_SOLANA]: \"Torus\",\n  [SOLANA_ADAPTERS.PHANTOM]: \"Phantom\",\n  [SOLANA_ADAPTERS.SOLFLARE]: \"Solflare\",\n  [SOLANA_ADAPTERS.SLOPE]: \"Slope\",\n  [EVM_ADAPTERS.TORUS_EVM]: \"Torus\",\n  [EVM_ADAPTERS.METAMASK]: \"Metamask\",\n  [EVM_ADAPTERS.COINBASE]: \"Coinbase\"\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nconst ADAPTER_CATEGORY = {\n  EXTERNAL: \"external\",\n  IN_APP: \"in_app\"\n};\nconst ADAPTER_STATUS = {\n  NOT_READY: \"not_ready\",\n  READY: \"ready\",\n  CONNECTING: \"connecting\",\n  CONNECTED: \"connected\",\n  DISCONNECTED: \"disconnected\",\n  ERRORED: \"errored\"\n};\nconst ADAPTER_EVENTS = _objectSpread(_objectSpread({}, ADAPTER_STATUS), {}, {\n  ADAPTER_DATA_UPDATED: \"adapter_data_updated\",\n  CACHE_CLEAR: \"cache_clear\"\n});\nclass BaseAdapter extends SafeEventEmitter {\n  // should be added in constructor or from setAdapterSettings function\n  // before calling init function.\n\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    _defineProperty(this, \"adapterData\", {});\n    _defineProperty(this, \"sessionTime\", 86400);\n    _defineProperty(this, \"clientId\", void 0);\n    _defineProperty(this, \"web3AuthNetwork\", OPENLOGIN_NETWORK.MAINNET);\n    _defineProperty(this, \"rehydrated\", false);\n    _defineProperty(this, \"chainConfig\", null);\n    _defineProperty(this, \"knownChainConfigs\", {});\n    this.setAdapterSettings(options);\n  }\n  get chainConfigProxy() {\n    return this.chainConfig ? _objectSpread({}, this.chainConfig) : null;\n  }\n  setAdapterSettings(options) {\n    if (this.status === ADAPTER_STATUS.READY) return;\n    if (options !== null && options !== void 0 && options.sessionTime) {\n      this.sessionTime = options.sessionTime;\n    }\n    if (options !== null && options !== void 0 && options.clientId) {\n      this.clientId = options.clientId;\n    }\n    if (options !== null && options !== void 0 && options.web3AuthNetwork) {\n      this.web3AuthNetwork = options.web3AuthNetwork;\n    }\n    const customChainConfig = options.chainConfig;\n    if (customChainConfig) {\n      if (!customChainConfig.chainNamespace) throw WalletInitializationError.notReady(\"ChainNamespace is required while setting chainConfig\");\n      this.currentChainNamespace = customChainConfig.chainNamespace;\n      // chainId is optional in this function.\n      // we go with mainnet chainId by default.\n      const defaultChainConfig = getChainConfig(customChainConfig.chainNamespace, customChainConfig.chainId);\n      // NOTE: It is being forced casted to CustomChainConfig to handle OTHER Chainnamespace\n      // where chainConfig is not required.\n      const finalChainConfig = _objectSpread(_objectSpread({}, defaultChainConfig || {}), customChainConfig);\n      this.chainConfig = finalChainConfig;\n      this.addChainConfig(finalChainConfig);\n    }\n  }\n  checkConnectionRequirements() {\n    // we reconnect without killing existing wallet connect session on calling connect again.\n    if ((this.name === WALLET_ADAPTERS.WALLET_CONNECT_V1 || this.name === WALLET_ADAPTERS.WALLET_CONNECT_V2) && this.status === ADAPTER_STATUS.CONNECTING) return;else if (this.status === ADAPTER_STATUS.CONNECTING) throw WalletInitializationError.notReady(\"Already connecting\");\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletLoginError.connectionError(\"Already connected\");\n    if (this.status !== ADAPTER_STATUS.READY) throw WalletLoginError.connectionError(\"Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function\");\n  }\n  checkInitializationRequirements() {\n    if (!this.clientId) throw WalletInitializationError.invalidParams(\"Please initialize Web3Auth with a valid clientId in constructor\");\n    if (!this.chainConfig) throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n    if (!this.chainConfig.rpcTarget && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"rpcTarget is required in chainConfig\");\n    }\n    if (!this.chainConfig.chainId && this.chainConfig.chainNamespace !== CHAIN_NAMESPACES.OTHER) {\n      throw WalletInitializationError.invalidParams(\"chainID is required in chainConfig\");\n    }\n    if (this.status === ADAPTER_STATUS.NOT_READY) return;\n    if (this.status === ADAPTER_STATUS.CONNECTED) throw WalletInitializationError.notReady(\"Already connected\");\n    if (this.status === ADAPTER_STATUS.READY) throw WalletInitializationError.notReady(\"Adapter is already initialized\");\n  }\n  checkDisconnectionRequirements() {\n    if (this.status !== ADAPTER_STATUS.CONNECTED) throw WalletLoginError.disconnectionError(\"Not connected with wallet\");\n  }\n  checkAddChainRequirements() {\n    let init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n  }\n  checkSwitchChainRequirements(_ref) {\n    let {\n      chainId\n    } = _ref;\n    let init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!init && !this.provider) throw WalletLoginError.notConnectedError(\"Not connected with wallet.\");\n    if (!this.knownChainConfigs[chainId]) throw WalletLoginError.chainConfigNotAdded(\"Invalid chainId\");\n  }\n  updateAdapterData(data) {\n    this.adapterData = data;\n    this.emit(ADAPTER_EVENTS.ADAPTER_DATA_UPDATED, {\n      adapterName: this.name,\n      data\n    });\n  }\n  addChainConfig(chainConfig) {\n    const currentConfig = this.knownChainConfigs[chainConfig.chainId];\n    this.knownChainConfigs[chainConfig.chainId] = _objectSpread(_objectSpread({}, currentConfig || {}), chainConfig);\n  }\n  getChainConfig(chainId) {\n    return this.knownChainConfigs[chainId] || null;\n  }\n}\nclass BaseNetworkSwitch {}\n\nconst authServer = \"https://authjs.web3auth.io\";\n\nvar log = loglevel.getLogger(\"web3auth-logger\");\n\nfunction storageAvailable(type) {\n  let storageExists = false;\n  let storageLength = 0;\n  let storage;\n  try {\n    storage = window[type];\n    storageExists = true;\n    storageLength = storage.length;\n    const x = \"__storage_test__\";\n    storage.setItem(x, x);\n    storage.removeItem(x);\n    return true;\n  } catch (error) {\n    const _error = error;\n    return !!(_error && (\n    // everything except Firefox\n    _error.code === 22 ||\n    // Firefox\n    _error.code === 1014 ||\n    // test name field too, because code might not be present\n    // everything except Firefox\n    _error.name === \"QuotaExceededError\" ||\n    // Firefox\n    _error.name === \"NS_ERROR_DOM_QUOTA_REACHED\") &&\n    // acknowledge QuotaExceededError only if there's something already stored\n    storageExists && storageLength !== 0);\n  }\n}\nconst isHexStrict = hex => {\n  return (typeof hex === \"string\" || typeof hex === \"number\") && /^(-)?0x[0-9a-f]*$/i.test(hex);\n};\n\nconst checkIfTokenIsExpired = token => {\n  const decoded = JwtDecode(token);\n  if (!decoded.exp) {\n    return true;\n  }\n  if (decoded.exp < Math.floor(Date.now() / 1000)) {\n    return true;\n  }\n  return false;\n};\nconst signChallenge = async (payload, chainNamespace) => {\n  const t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n  const header = {\n    t\n  };\n  const network = chainNamespace === \"solana\" ? \"solana\" : \"ethereum\";\n  const data = {\n    payload,\n    header,\n    network\n  };\n  const res = await post(`${authServer}/siww/get`, data);\n  if (!res.success) {\n    throw new Error(\"Failed to authenticate user, Please reach out to Web3Auth Support team\");\n  }\n  return res.challenge;\n};\nconst verifySignedChallenge = async (chainNamespace, signedMessage, challenge, issuer, sessionTime, clientId, web3AuthNetwork) => {\n  const t = chainNamespace === \"solana\" ? \"sip99\" : \"eip191\";\n  const sigData = {\n    signature: {\n      s: signedMessage,\n      t\n    },\n    message: challenge,\n    issuer,\n    audience: window.location.hostname,\n    timeout: sessionTime\n  };\n  const idTokenRes = await post(`${authServer}/siww/verify`, sigData, {\n    headers: {\n      client_id: clientId,\n      wallet_provider: issuer,\n      web3auth_network: web3AuthNetwork\n    }\n  });\n  if (!idTokenRes.success) {\n    log.error(\"Failed to authenticate user, ,message verification failed\", idTokenRes.error);\n    throw new Error(\"Failed to authenticate user, ,message verification failed\");\n  }\n  return idTokenRes.token;\n};\nconst getSavedToken = (userAddress, issuer) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.getItem(`${userAddress.toLowerCase()}_${issuer}`);\n  }\n  return null;\n};\nconst saveToken = (userAddress, issuer, token) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.setItem(`${userAddress.toLowerCase()}_${issuer}`, token);\n  }\n  return null;\n};\nconst clearToken = (userAddress, issuer) => {\n  if (storageAvailable(\"localStorage\")) {\n    return localStorage.removeItem(`${userAddress.toLowerCase()}_${issuer}`);\n  }\n  return null;\n};\n\nconst PROVIDER_EVENTS = {\n  INITIALIZED: \"initialized\",\n  ERRORED: \"errored\"\n};\n\nexport { ADAPTER_CATEGORY, ADAPTER_EVENTS, ADAPTER_NAMES, ADAPTER_NAMESPACES, ADAPTER_STATUS, BaseAdapter, BaseNetworkSwitch, CHAIN_NAMESPACES, EVM_ADAPTERS, MULTI_CHAIN_ADAPTERS, PROVIDER_EVENTS, SOLANA_ADAPTERS, WALLET_ADAPTERS, WalletInitializationError, WalletLoginError, WalletOperationsError, Web3AuthError, authServer, checkIfTokenIsExpired, clearToken, getChainConfig, getEvmChainConfig, getSavedToken, getSolanaChainConfig, isHexStrict, log, saveToken, signChallenge, storageAvailable, verifySignedChallenge };\n//# sourceMappingURL=base.esm.js.map\n"]},"metadata":{},"sourceType":"module"}