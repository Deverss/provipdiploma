{"ast":null,"code":"\"use strict\"; // Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SystemRandomSource = void 0;\n\nconst browser_1 = require(\"./browser\");\n\nconst node_1 = require(\"./node\");\n\nclass SystemRandomSource {\n  constructor() {\n    this.isAvailable = false;\n    this.name = \"\"; // Try browser.\n\n    this._source = new browser_1.BrowserRandomSource();\n\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Browser\";\n      return;\n    } // If no browser source, try Node.\n\n\n    this._source = new node_1.NodeRandomSource();\n\n    if (this._source.isAvailable) {\n      this.isAvailable = true;\n      this.name = \"Node\";\n      return;\n    } // No sources, we're out of options.\n\n  }\n\n  randomBytes(length) {\n    if (!this.isAvailable) {\n      throw new Error(\"System random byte generator is not available.\");\n    }\n\n    return this._source.randomBytes(length);\n  }\n\n}\n\nexports.SystemRandomSource = SystemRandomSource;","map":{"version":3,"sources":["../../source/system.ts"],"names":[],"mappings":"cAAA;AACA;;;;;;;AAGA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,QAAA,CAAA;;AAEA,MAAa,kBAAb,CAA+B;AAK3B,EAAA,WAAA,GAAA;AAJA,SAAA,WAAA,GAAc,KAAd;AACA,SAAA,IAAA,GAAO,EAAP,CAGA,CACI;;AACA,SAAK,OAAL,GAAe,IAAI,SAAA,CAAA,mBAAJ,EAAf;;AACA,QAAI,KAAK,OAAL,CAAa,WAAjB,EAA8B;AAC1B,WAAK,WAAL,GAAmB,IAAnB;AACA,WAAK,IAAL,GAAY,SAAZ;AACA;AACH,KAPL,CASI;;;AACA,SAAK,OAAL,GAAe,IAAI,MAAA,CAAA,gBAAJ,EAAf;;AACA,QAAI,KAAK,OAAL,CAAa,WAAjB,EAA8B;AAC1B,WAAK,WAAL,GAAmB,IAAnB;AACA,WAAK,IAAL,GAAY,MAAZ;AACA;AACH,KAfL,CAiBI;;AACH;;AAED,EAAA,WAAW,CAAC,MAAD,EAAe;AACtB,QAAI,CAAC,KAAK,WAAV,EAAuB;AACnB,YAAM,IAAI,KAAJ,CAAU,gDAAV,CAAN;AACH;;AACD,WAAO,KAAK,OAAL,CAAa,WAAb,CAAyB,MAAzB,CAAP;AACH;;AA9B0B;;AAA/B,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\n// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SystemRandomSource = void 0;\nconst browser_1 = require(\"./browser\");\nconst node_1 = require(\"./node\");\nclass SystemRandomSource {\n    constructor() {\n        this.isAvailable = false;\n        this.name = \"\";\n        // Try browser.\n        this._source = new browser_1.BrowserRandomSource();\n        if (this._source.isAvailable) {\n            this.isAvailable = true;\n            this.name = \"Browser\";\n            return;\n        }\n        // If no browser source, try Node.\n        this._source = new node_1.NodeRandomSource();\n        if (this._source.isAvailable) {\n            this.isAvailable = true;\n            this.name = \"Node\";\n            return;\n        }\n        // No sources, we're out of options.\n    }\n    randomBytes(length) {\n        if (!this.isAvailable) {\n            throw new Error(\"System random byte generator is not available.\");\n        }\n        return this._source.randomBytes(length);\n    }\n}\nexports.SystemRandomSource = SystemRandomSource;\n//# sourceMappingURL=system.js.map"]},"metadata":{},"sourceType":"script"}