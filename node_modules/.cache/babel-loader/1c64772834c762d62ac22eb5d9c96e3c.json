{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PROMISE_RESOLVED_VOID = exports.PROMISE_RESOLVED_TRUE = exports.PROMISE_RESOLVED_FALSE = void 0;\nexports.are3PCSupported = are3PCSupported;\nexports.isPromise = isPromise;\nexports.log = void 0;\nexports.microSeconds = microSeconds;\nexports.randomInt = randomInt;\nexports.randomToken = randomToken;\nexports.setLogLevel = void 0;\nexports.sleep = sleep;\n\nvar _bowser = _interopRequireDefault(require(\"bowser\"));\n\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n/**\n * returns true if the given object is a promise\n */\n\n\nfunction isPromise(obj) {\n  if (obj && typeof obj.then === 'function') {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nvar PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexports.PROMISE_RESOLVED_FALSE = PROMISE_RESOLVED_FALSE;\nvar PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexports.PROMISE_RESOLVED_TRUE = PROMISE_RESOLVED_TRUE;\nvar PROMISE_RESOLVED_VOID = Promise.resolve();\nexports.PROMISE_RESOLVED_VOID = PROMISE_RESOLVED_VOID;\n\nfunction sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\n\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n/**\n * https://stackoverflow.com/a/8084248\n */\n\n\nfunction randomToken() {\n  return Math.random().toString(36).substring(2);\n}\n\nvar lastMs = 0;\nvar additional = 0;\n/**\n * returns the current time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\n\nfunction microSeconds() {\n  var ms = new Date().getTime();\n\n  if (ms === lastMs) {\n    additional++;\n    return ms * 1000 + additional;\n  } else {\n    lastMs = ms;\n    additional = 0;\n    return ms * 1000;\n  }\n}\n\nfunction are3PCSupported() {\n  if (typeof navigator === 'undefined') return false;\n\n  var browserInfo = _bowser[\"default\"].parse(navigator.userAgent);\n\n  log.info(JSON.stringify(browserInfo), 'current browser info');\n  var thirdPartyCookieSupport = true; // brave\n\n  if (navigator.brave) {\n    thirdPartyCookieSupport = false;\n  } // All webkit & gecko engine instances use itp (intelligent tracking prevention -\n  // https://webkit.org/tracking-prevention/#intelligent-tracking-prevention-itp)\n\n\n  if (browserInfo.engine.name === _bowser[\"default\"].ENGINE_MAP.WebKit || browserInfo.engine.name === _bowser[\"default\"].ENGINE_MAP.Gecko) {\n    thirdPartyCookieSupport = false;\n  }\n\n  return thirdPartyCookieSupport;\n}\n\nvar log = _loglevel[\"default\"].getLogger('broadcast-channel');\n\nexports.log = log;\nlog.setLevel('error');\n\nvar setLogLevel = function setLogLevel(level) {\n  log.setLevel(level);\n};\n\nexports.setLogLevel = setLogLevel;","map":{"version":3,"sources":["/Users/dev3rs/provipdiploma/node_modules/@toruslabs/broadcast-channel/dist/lib/util.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","PROMISE_RESOLVED_VOID","PROMISE_RESOLVED_TRUE","PROMISE_RESOLVED_FALSE","are3PCSupported","isPromise","log","microSeconds","randomInt","randomToken","setLogLevel","sleep","_bowser","_loglevel","obj","then","Promise","resolve","time","resolveWith","res","setTimeout","min","max","Math","floor","random","toString","substring","lastMs","additional","ms","Date","getTime","navigator","browserInfo","parse","userAgent","info","JSON","stringify","thirdPartyCookieSupport","brave","engine","name","ENGINE_MAP","WebKit","Gecko","getLogger","setLevel","level"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PROMISE_RESOLVED_VOID = exports.PROMISE_RESOLVED_TRUE = exports.PROMISE_RESOLVED_FALSE = void 0;\nexports.are3PCSupported = are3PCSupported;\nexports.isPromise = isPromise;\nexports.log = void 0;\nexports.microSeconds = microSeconds;\nexports.randomInt = randomInt;\nexports.randomToken = randomToken;\nexports.setLogLevel = void 0;\nexports.sleep = sleep;\nvar _bowser = _interopRequireDefault(require(\"bowser\"));\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\n/**\n * returns true if the given object is a promise\n */\nfunction isPromise(obj) {\n  if (obj && typeof obj.then === 'function') {\n    return true;\n  } else {\n    return false;\n  }\n}\nvar PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexports.PROMISE_RESOLVED_FALSE = PROMISE_RESOLVED_FALSE;\nvar PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexports.PROMISE_RESOLVED_TRUE = PROMISE_RESOLVED_TRUE;\nvar PROMISE_RESOLVED_VOID = Promise.resolve();\nexports.PROMISE_RESOLVED_VOID = PROMISE_RESOLVED_VOID;\nfunction sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * https://stackoverflow.com/a/8084248\n */\nfunction randomToken() {\n  return Math.random().toString(36).substring(2);\n}\nvar lastMs = 0;\nvar additional = 0;\n\n/**\n * returns the current time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\nfunction microSeconds() {\n  var ms = new Date().getTime();\n  if (ms === lastMs) {\n    additional++;\n    return ms * 1000 + additional;\n  } else {\n    lastMs = ms;\n    additional = 0;\n    return ms * 1000;\n  }\n}\nfunction are3PCSupported() {\n  if (typeof navigator === 'undefined') return false;\n  var browserInfo = _bowser[\"default\"].parse(navigator.userAgent);\n  log.info(JSON.stringify(browserInfo), 'current browser info');\n  var thirdPartyCookieSupport = true;\n  // brave\n  if (navigator.brave) {\n    thirdPartyCookieSupport = false;\n  }\n  // All webkit & gecko engine instances use itp (intelligent tracking prevention -\n  // https://webkit.org/tracking-prevention/#intelligent-tracking-prevention-itp)\n  if (browserInfo.engine.name === _bowser[\"default\"].ENGINE_MAP.WebKit || browserInfo.engine.name === _bowser[\"default\"].ENGINE_MAP.Gecko) {\n    thirdPartyCookieSupport = false;\n  }\n  return thirdPartyCookieSupport;\n}\nvar log = _loglevel[\"default\"].getLogger('broadcast-channel');\nexports.log = log;\nlog.setLevel('error');\nvar setLogLevel = function setLogLevel(level) {\n  log.setLevel(level);\n};\nexports.setLogLevel = setLogLevel;"]},"metadata":{},"sourceType":"script"}