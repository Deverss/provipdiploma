{"ast":null,"code":"import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport Torus from '@toruslabs/torus-embed';\nimport { WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, log, ADAPTER_EVENTS, getChainConfig, Web3AuthError, WalletLoginError, WalletInitializationError } from '@web3auth/base';\nimport { BaseEvmAdapter } from '@web3auth/base-evm-adapter';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar TorusWalletAdapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  _inherits(TorusWalletAdapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(TorusWalletAdapter);\n\n  function TorusWalletAdapter(params) {\n    var _this;\n\n    _classCallCheck(this, TorusWalletAdapter);\n\n    _this = _super.call(this, params);\n\n    _defineProperty(_assertThisInitialized(_this), \"name\", WALLET_ADAPTERS.TORUS_EVM);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(_assertThisInitialized(_this), \"torusInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"torusWalletOptions\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"initParams\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"loginSettings\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"rehydrated\", false);\n\n    _this.torusWalletOptions = params.adapterSettings || {};\n    _this.initParams = params.initParams || {};\n    _this.loginSettings = params.loginSettings || {};\n    _this.chainConfig = params.chainConfig || null;\n    _this.sessionTime = params.sessionTime || 86400;\n    return _this;\n  }\n\n  _createClass(TorusWalletAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === ADAPTER_STATUS.CONNECTED && this.torusInstance) {\n        return this.torusInstance.provider;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(options) {\n        var network, _this$chainConfig, blockExplorer, displayName, chainId, ticker, tickerName, _this$chainConfig2, _chainId2, _blockExplorer, _displayName, rpcTarget, _ticker, _tickerName;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"checkInitializationRequirements\", this).call(this); // set chainConfig for mainnet by default if not set\n\n\n                if (!this.chainConfig) {\n                  this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n                  _this$chainConfig = this.chainConfig, blockExplorer = _this$chainConfig.blockExplorer, displayName = _this$chainConfig.displayName, chainId = _this$chainConfig.chainId, ticker = _this$chainConfig.ticker, tickerName = _this$chainConfig.tickerName;\n                  network = {\n                    chainId: Number.parseInt(chainId, 16),\n                    host: \"mainnet\",\n                    blockExplorer: blockExplorer,\n                    networkName: displayName,\n                    ticker: ticker,\n                    tickerName: tickerName\n                  };\n                } else {\n                  _this$chainConfig2 = this.chainConfig, _chainId2 = _this$chainConfig2.chainId, _blockExplorer = _this$chainConfig2.blockExplorer, _displayName = _this$chainConfig2.displayName, rpcTarget = _this$chainConfig2.rpcTarget, _ticker = _this$chainConfig2.ticker, _tickerName = _this$chainConfig2.tickerName;\n                  network = {\n                    chainId: Number.parseInt(_chainId2, 16),\n                    host: rpcTarget,\n                    blockExplorer: _blockExplorer,\n                    networkName: _displayName,\n                    ticker: _ticker,\n                    tickerName: _tickerName\n                  };\n                }\n\n                this.torusInstance = new Torus(this.torusWalletOptions);\n                log.debug(\"initializing torus evm adapter init\");\n                _context.next = 6;\n                return this.torusInstance.init(_objectSpread(_objectSpread({\n                  showTorusButton: false\n                }, this.initParams), {}, {\n                  network: network\n                }));\n\n              case 6:\n                this.status = ADAPTER_STATUS.READY;\n                this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_EVM);\n                _context.prev = 8;\n                log.debug(\"initializing torus evm adapter\");\n\n                if (!options.autoConnect) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 14;\n                return this.connect();\n\n              case 14:\n                _context.next = 20;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](8);\n                log.error(\"Failed to connect with torus evm provider\", _context.t0);\n                this.emit(ADAPTER_EVENTS.ERRORED, _context.t0);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 16]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var chainId, _this$chainConfig3, _chainId, blockExplorer, displayName, rpcTarget, ticker, tickerName, network, updatedChainID;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.torusInstance) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                this.status = ADAPTER_STATUS.CONNECTING;\n                this.emit(ADAPTER_EVENTS.CONNECTING, {\n                  adapter: WALLET_ADAPTERS.TORUS_EVM\n                });\n                _context2.prev = 5;\n                _context2.next = 8;\n                return this.torusInstance.login(this.loginSettings);\n\n              case 8:\n                chainId = this.torusInstance.provider.chainId;\n\n                if (!(chainId && parseInt(chainId) !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                _this$chainConfig3 = this.chainConfig, _chainId = _this$chainConfig3.chainId, blockExplorer = _this$chainConfig3.blockExplorer, displayName = _this$chainConfig3.displayName, rpcTarget = _this$chainConfig3.rpcTarget, ticker = _this$chainConfig3.ticker, tickerName = _this$chainConfig3.tickerName;\n                network = {\n                  chainId: Number.parseInt(_chainId, 16),\n                  host: rpcTarget,\n                  blockExplorer: blockExplorer,\n                  networkName: displayName,\n                  tickerName: tickerName,\n                  ticker: ticker\n                }; // in some cases when user manually switches chain and relogin then adapter will not connect to initially passed\n                // chainConfig but will connect to the one that user switched to.\n                // So here trying to switch network to the one that was initially passed in chainConfig.\n\n                _context2.next = 14;\n                return this.torusInstance.setProvider(_objectSpread({}, network));\n\n              case 14:\n                _context2.next = 16;\n                return this.torusInstance.ethereum.request({\n                  method: \"eth_chainId\"\n                });\n\n              case 16:\n                updatedChainID = _context2.sent;\n\n                if (!(updatedChainID && parseInt(updatedChainID) !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw WalletInitializationError.fromCode(5000, \"Not connected to correct chainId. Expected: \".concat(this.chainConfig.chainId, \", Current: \").concat(updatedChainID));\n\n              case 19:\n                this.status = ADAPTER_STATUS.CONNECTED;\n                this.torusInstance.showTorusButton();\n                this.emit(ADAPTER_STATUS.CONNECTED, {\n                  adapter: WALLET_ADAPTERS.TORUS_EVM,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 25:\n                _context2.prev = 25;\n                _context2.t0 = _context2[\"catch\"](5); // ready again to be connected\n\n                this.status = ADAPTER_STATUS.READY;\n                this.rehydrated = false;\n                this.emit(ADAPTER_STATUS.ERRORED, _context2.t0);\n                throw _context2.t0 instanceof Web3AuthError ? _context2.t0 : WalletLoginError.connectionError(\"Failed to login with torus wallet\");\n\n              case 31:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 25]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var options,\n            _args3 = arguments;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n\n                if (this.torusInstance) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                _context3.next = 5;\n                return _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"disconnect\", this).call(this);\n\n              case 5:\n                _context3.next = 7;\n                return this.torusInstance.logout();\n\n              case 7:\n                this.torusInstance.hideTorusButton();\n\n                if (options.cleanup) {\n                  this.status = ADAPTER_STATUS.NOT_READY;\n                  this.torusInstance = null;\n                } else {\n                  // ready to be connected again\n                  this.status = ADAPTER_STATUS.READY;\n                }\n\n                this.rehydrated = false;\n                this.emit(ADAPTER_EVENTS.DISCONNECTED);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var userInfo;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                if (this.torusInstance) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 4:\n                _context4.next = 6;\n                return this.torusInstance.getUserInfo(\"\");\n\n              case 6:\n                userInfo = _context4.sent;\n                return _context4.abrupt(\"return\", userInfo);\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }]);\n\n  return TorusWalletAdapter;\n}(BaseEvmAdapter);\n\nexport { TorusWalletAdapter };","map":{"version":3,"sources":["../src/torusWalletAdapter.ts"],"names":["TorusWalletAdapter","WALLET_ADAPTERS","TORUS_EVM","ADAPTER_NAMESPACES","EIP155","CHAIN_NAMESPACES","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","params","getChainConfig","blockExplorer","displayName","chainId","ticker","tickerName","network","Number","host","networkName","rpcTarget","log","showTorusButton","ADAPTER_EVENTS","options","WalletInitializationError","adapter","parseInt","_chainId","updatedChainID","method","reconnected","rehydrated","WalletLoginError","cleanup","userInfo"],"mappings":"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","sourcesContent":["import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport Torus from '@toruslabs/torus-embed';\nimport { WALLET_ADAPTERS, ADAPTER_NAMESPACES, CHAIN_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, log, ADAPTER_EVENTS, getChainConfig, Web3AuthError, WalletLoginError, WalletInitializationError } from '@web3auth/base';\nimport { BaseEvmAdapter } from '@web3auth/base-evm-adapter';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar TorusWalletAdapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  _inherits(TorusWalletAdapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(TorusWalletAdapter);\n\n  function TorusWalletAdapter(params) {\n    var _this;\n\n    _classCallCheck(this, TorusWalletAdapter);\n\n    _this = _super.call(this, params);\n\n    _defineProperty(_assertThisInitialized(_this), \"name\", WALLET_ADAPTERS.TORUS_EVM);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(_assertThisInitialized(_this), \"torusInstance\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"torusWalletOptions\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"initParams\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"loginSettings\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"rehydrated\", false);\n\n    _this.torusWalletOptions = params.adapterSettings || {};\n    _this.initParams = params.initParams || {};\n    _this.loginSettings = params.loginSettings || {};\n    _this.chainConfig = params.chainConfig || null;\n    _this.sessionTime = params.sessionTime || 86400;\n    return _this;\n  }\n\n  _createClass(TorusWalletAdapter, [{\n    key: \"provider\",\n    get: function get() {\n      if (this.status === ADAPTER_STATUS.CONNECTED && this.torusInstance) {\n        return this.torusInstance.provider;\n      }\n\n      return null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(options) {\n        var network, _this$chainConfig, blockExplorer, displayName, chainId, ticker, tickerName, _this$chainConfig2, _chainId2, _blockExplorer, _displayName, rpcTarget, _ticker, _tickerName;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"checkInitializationRequirements\", this).call(this); // set chainConfig for mainnet by default if not set\n\n\n                if (!this.chainConfig) {\n                  this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n                  _this$chainConfig = this.chainConfig, blockExplorer = _this$chainConfig.blockExplorer, displayName = _this$chainConfig.displayName, chainId = _this$chainConfig.chainId, ticker = _this$chainConfig.ticker, tickerName = _this$chainConfig.tickerName;\n                  network = {\n                    chainId: Number.parseInt(chainId, 16),\n                    host: \"mainnet\",\n                    blockExplorer: blockExplorer,\n                    networkName: displayName,\n                    ticker: ticker,\n                    tickerName: tickerName\n                  };\n                } else {\n                  _this$chainConfig2 = this.chainConfig, _chainId2 = _this$chainConfig2.chainId, _blockExplorer = _this$chainConfig2.blockExplorer, _displayName = _this$chainConfig2.displayName, rpcTarget = _this$chainConfig2.rpcTarget, _ticker = _this$chainConfig2.ticker, _tickerName = _this$chainConfig2.tickerName;\n                  network = {\n                    chainId: Number.parseInt(_chainId2, 16),\n                    host: rpcTarget,\n                    blockExplorer: _blockExplorer,\n                    networkName: _displayName,\n                    ticker: _ticker,\n                    tickerName: _tickerName\n                  };\n                }\n\n                this.torusInstance = new Torus(this.torusWalletOptions);\n                log.debug(\"initializing torus evm adapter init\");\n                _context.next = 6;\n                return this.torusInstance.init(_objectSpread(_objectSpread({\n                  showTorusButton: false\n                }, this.initParams), {}, {\n                  network: network\n                }));\n\n              case 6:\n                this.status = ADAPTER_STATUS.READY;\n                this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.TORUS_EVM);\n                _context.prev = 8;\n                log.debug(\"initializing torus evm adapter\");\n\n                if (!options.autoConnect) {\n                  _context.next = 14;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 14;\n                return this.connect();\n\n              case 14:\n                _context.next = 20;\n                break;\n\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](8);\n                log.error(\"Failed to connect with torus evm provider\", _context.t0);\n                this.emit(ADAPTER_EVENTS.ERRORED, _context.t0);\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[8, 16]]);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var chainId, _this$chainConfig3, _chainId, blockExplorer, displayName, rpcTarget, ticker, tickerName, network, updatedChainID;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.torusInstance) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                this.status = ADAPTER_STATUS.CONNECTING;\n                this.emit(ADAPTER_EVENTS.CONNECTING, {\n                  adapter: WALLET_ADAPTERS.TORUS_EVM\n                });\n                _context2.prev = 5;\n                _context2.next = 8;\n                return this.torusInstance.login(this.loginSettings);\n\n              case 8:\n                chainId = this.torusInstance.provider.chainId;\n\n                if (!(chainId && parseInt(chainId) !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                _this$chainConfig3 = this.chainConfig, _chainId = _this$chainConfig3.chainId, blockExplorer = _this$chainConfig3.blockExplorer, displayName = _this$chainConfig3.displayName, rpcTarget = _this$chainConfig3.rpcTarget, ticker = _this$chainConfig3.ticker, tickerName = _this$chainConfig3.tickerName;\n                network = {\n                  chainId: Number.parseInt(_chainId, 16),\n                  host: rpcTarget,\n                  blockExplorer: blockExplorer,\n                  networkName: displayName,\n                  tickerName: tickerName,\n                  ticker: ticker\n                }; // in some cases when user manually switches chain and relogin then adapter will not connect to initially passed\n                // chainConfig but will connect to the one that user switched to.\n                // So here trying to switch network to the one that was initially passed in chainConfig.\n\n                _context2.next = 14;\n                return this.torusInstance.setProvider(_objectSpread({}, network));\n\n              case 14:\n                _context2.next = 16;\n                return this.torusInstance.ethereum.request({\n                  method: \"eth_chainId\"\n                });\n\n              case 16:\n                updatedChainID = _context2.sent;\n\n                if (!(updatedChainID && parseInt(updatedChainID) !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context2.next = 19;\n                  break;\n                }\n\n                throw WalletInitializationError.fromCode(5000, \"Not connected to correct chainId. Expected: \".concat(this.chainConfig.chainId, \", Current: \").concat(updatedChainID));\n\n              case 19:\n                this.status = ADAPTER_STATUS.CONNECTED;\n                this.torusInstance.showTorusButton();\n                this.emit(ADAPTER_STATUS.CONNECTED, {\n                  adapter: WALLET_ADAPTERS.TORUS_EVM,\n                  reconnected: this.rehydrated\n                });\n                return _context2.abrupt(\"return\", this.provider);\n\n              case 25:\n                _context2.prev = 25;\n                _context2.t0 = _context2[\"catch\"](5);\n                // ready again to be connected\n                this.status = ADAPTER_STATUS.READY;\n                this.rehydrated = false;\n                this.emit(ADAPTER_STATUS.ERRORED, _context2.t0);\n                throw _context2.t0 instanceof Web3AuthError ? _context2.t0 : WalletLoginError.connectionError(\"Failed to login with torus wallet\");\n\n              case 31:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 25]]);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var options,\n            _args3 = arguments;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {\n                  cleanup: false\n                };\n\n                if (this.torusInstance) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 3:\n                _context3.next = 5;\n                return _get(_getPrototypeOf(TorusWalletAdapter.prototype), \"disconnect\", this).call(this);\n\n              case 5:\n                _context3.next = 7;\n                return this.torusInstance.logout();\n\n              case 7:\n                this.torusInstance.hideTorusButton();\n\n                if (options.cleanup) {\n                  this.status = ADAPTER_STATUS.NOT_READY;\n                  this.torusInstance = null;\n                } else {\n                  // ready to be connected again\n                  this.status = ADAPTER_STATUS.READY;\n                }\n\n                this.rehydrated = false;\n                this.emit(ADAPTER_EVENTS.DISCONNECTED);\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var userInfo;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTED)) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 2:\n                if (this.torusInstance) {\n                  _context4.next = 4;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Torus wallet is not initialized\");\n\n              case 4:\n                _context4.next = 6;\n                return this.torusInstance.getUserInfo(\"\");\n\n              case 6:\n                userInfo = _context4.sent;\n                return _context4.abrupt(\"return\", userInfo);\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }]);\n\n  return TorusWalletAdapter;\n}(BaseEvmAdapter);\n\nexport { TorusWalletAdapter };\n//# sourceMappingURL=torusEvmAdapter.esm.js.map\n"]},"metadata":{},"sourceType":"module"}