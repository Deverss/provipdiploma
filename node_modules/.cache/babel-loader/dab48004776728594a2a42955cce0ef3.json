{"ast":null,"code":"import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport WalletConnect from '@walletconnect/client';\nimport { CHAIN_NAMESPACES, WALLET_ADAPTERS, ADAPTER_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, log, WalletInitializationError, Web3AuthError, WalletLoginError } from '@web3auth/base';\nimport { BaseEvmAdapter } from '@web3auth/base-evm-adapter';\nimport { WalletConnectProvider } from '@web3auth/ethereum-provider';\nvar WALLET_CONNECT_EXTENSION_ADAPTERS = [{\n  name: \"Rainbow\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-rainbow.svg\",\n  mobile: {\n    native: \"rainbow:\",\n    universal: \"https://rnbwapp.com\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}, {\n  name: \"MetaMask\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-metamask.svg\",\n  mobile: {\n    native: \"metamask:\",\n    universal: \"https://metamask.app.link\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}];\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar WalletConnectV1Adapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  _inherits(WalletConnectV1Adapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(WalletConnectV1Adapter);\n\n  function WalletConnectV1Adapter(options) {\n    var _this;\n\n    _classCallCheck(this, WalletConnectV1Adapter);\n\n    _this = _super.call(this, options);\n\n    _defineProperty(_assertThisInitialized(_this), \"name\", WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterOptions\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterData\", {\n      uri: \"\",\n      extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"connector\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"wcProvider\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"rehydrated\", false);\n\n    _this.adapterOptions = _objectSpread({}, options);\n    _this.chainConfig = options.chainConfig || null;\n    _this.sessionTime = options.sessionTime || 86400;\n    return _this;\n  }\n\n  _createClass(WalletConnectV1Adapter, [{\n    key: \"connected\",\n    get: function get() {\n      var _this$connector;\n\n      return !!((_this$connector = this.connector) !== null && _this$connector !== void 0 && _this$connector.connected);\n    }\n  }, {\n    key: \"provider\",\n    get: function get() {\n      var _this$wcProvider;\n\n      return ((_this$wcProvider = this.wcProvider) === null || _this$wcProvider === void 0 ? void 0 : _this$wcProvider.provider) || null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkInitializationRequirements\", this).call(this);\n\n                if (!this.chainConfig) {\n                  this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n                } // Create a connector\n\n\n                this.connector = this.getWalletConnectInstance();\n                this.wcProvider = new WalletConnectProvider({\n                  config: {\n                    chainConfig: this.chainConfig\n                  },\n                  connector: this.connector\n                });\n                this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n                this.status = ADAPTER_STATUS.READY;\n                log.debug(\"initializing wallet connect v1 adapter\");\n\n                if (!this.connector.connected) {\n                  _context.next = 11;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 11;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this2 = this;\n\n        var _this$adapterOptions$, _this$adapterOptions$2;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.connector) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!this.connected) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 6:\n                return _context4.abrupt(\"return\", this.provider);\n\n              case 7:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTING)) {\n                  _context4.next = 13;\n                  break;\n                } // for wallet connect qr code modal we have to create a new connector, coz wallet connect internally does not open\n                // modal again on existing instance if connection is pending.\n\n\n                if ((_this$adapterOptions$ = this.adapterOptions.adapterSettings) !== null && _this$adapterOptions$ !== void 0 && _this$adapterOptions$.qrcodeModal) {\n                  this.connector = this.getWalletConnectInstance();\n                  this.wcProvider = new WalletConnectProvider({\n                    config: {\n                      chainConfig: this.chainConfig,\n                      // network switching can be skipped with custom ui\n                      skipLookupNetwork: (_this$adapterOptions$2 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$2 === void 0 ? void 0 : _this$adapterOptions$2.skipNetworkSwitching\n                    },\n                    connector: this.connector\n                  });\n                }\n\n                _context4.next = 11;\n                return this.createNewSession();\n\n              case 11:\n                this.status = ADAPTER_STATUS.CONNECTING;\n                this.emit(ADAPTER_EVENTS.CONNECTING, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1\n                });\n\n              case 13:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (!_this2.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\")); // for wallet connect default modal.\n\n                  _this2.connector.on(\"modal_closed\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _this2.status = ADAPTER_STATUS.READY;\n\n                            _this2.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n                            return _context2.abrupt(\"return\", reject(new Error(\"User closed modal\")));\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })));\n\n                  try {\n                    // Subscribe to session connection\n                    _this2.connector.on(\"connect\", /*#__PURE__*/function () {\n                      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(error, payload) {\n                        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                          while (1) {\n                            switch (_context3.prev = _context3.next) {\n                              case 0:\n                                if (error) {\n                                  _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n                                }\n\n                                log.debug(\"connected event emitted by web3auth\");\n                                _context3.next = 4;\n                                return _this2.onConnectHandler(payload.params[0]);\n\n                              case 4:\n                                return _context3.abrupt(\"return\", resolve(_this2.provider));\n\n                              case 5:\n                              case \"end\":\n                                return _context3.stop();\n                            }\n                          }\n                        }, _callee3);\n                      }));\n\n                      return function (_x, _x2) {\n                        return _ref2.apply(this, arguments);\n                      };\n                    }());\n                  } catch (error) {\n                    log.error(\"Wallet connect v1 adapter error while connecting\", error); // ready again to be connected\n\n                    _this2.status = ADAPTER_STATUS.READY;\n                    _this2.rehydrated = true;\n\n                    _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    reject(error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with wallet connect: \".concat((error === null || error === void 0 ? void 0 : error.message) || \"\")));\n                  }\n                }));\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.connected) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 2:\n                return _context5.abrupt(\"return\", {});\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var options,\n            cleanup,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {\n                  cleanup: false\n                };\n                cleanup = options.cleanup;\n\n                if (!(!this.connector || !this.connected)) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 4:\n                _context6.next = 6;\n                return _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"disconnect\", this).call(this);\n\n              case 6:\n                _context6.next = 8;\n                return this.connector.killSession();\n\n              case 8:\n                this.rehydrated = false;\n\n                if (cleanup) {\n                  this.connector = null;\n                  this.status = ADAPTER_STATUS.NOT_READY;\n                  this.wcProvider = null;\n                } else {\n                  // ready to connect again\n                  this.status = ADAPTER_STATUS.READY;\n                }\n\n                this.emit(ADAPTER_EVENTS.DISCONNECTED);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"addChain\",\n    value: function () {\n      var _addChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(chainConfig) {\n        var _this$adapterOptions$3, networkSwitch;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n\n                if (this.wcProvider) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                networkSwitch = (_this$adapterOptions$3 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$3 === void 0 ? void 0 : _this$adapterOptions$3.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                _context7.next = 7;\n                return networkSwitch.addNetwork({\n                  chainConfig: chainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 7:\n                _context7.next = 9;\n                return this.wcProvider.addChain(chainConfig);\n\n              case 9:\n                _context7.next = 14;\n                break;\n\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7[\"catch\"](0);\n                log.error(_context7.t0);\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 11]]);\n      }));\n\n      function addChain(_x3) {\n        return _addChain.apply(this, arguments);\n      }\n\n      return addChain;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(connectedChainConfig, chainConfig) {\n        var _this$adapterOptions$4;\n\n        var networkSwitch;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (this.wcProvider) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                networkSwitch = (_this$adapterOptions$4 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$4 === void 0 ? void 0 : _this$adapterOptions$4.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                _context8.next = 6;\n                return networkSwitch.switchNetwork({\n                  currentChainConfig: chainConfig,\n                  newChainConfig: connectedChainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 6:\n                _context8.next = 8;\n                return this.wcProvider.switchChain({\n                  chainId: chainConfig.chainId,\n                  lookup: false,\n                  addChain: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function switchChain(_x4, _x5) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }, {\n    key: \"createNewSession\",\n    value: function () {\n      var _createNewSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var _this$adapterOptions,\n            _this$adapterOptions$5,\n            _this3 = this;\n\n        var opts,\n            _this$chainConfig,\n            _args10 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                opts = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {\n                  forceNewSession: false\n                };\n\n                if (this.connector) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!(opts.forceNewSession && this.connector.pending)) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                _context10.next = 6;\n                return this.connector.killSession();\n\n              case 6:\n                if (!((_this$adapterOptions = this.adapterOptions) !== null && _this$adapterOptions !== void 0 && (_this$adapterOptions$5 = _this$adapterOptions.adapterSettings) !== null && _this$adapterOptions$5 !== void 0 && _this$adapterOptions$5.qrcodeModal)) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.next = 9;\n                return this.connector.createSession({\n                  chainId: parseInt(((_this$chainConfig = this.chainConfig) === null || _this$chainConfig === void 0 ? void 0 : _this$chainConfig.chainId) || \"0x1\", 16)\n                });\n\n              case 9:\n                return _context10.abrupt(\"return\");\n\n              case 10:\n                return _context10.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var _this3$chainConfig;\n\n                  if (!_this3.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\"));\n                  log.debug(\"creating new session for web3auth wallet connect\");\n\n                  _this3.connector.on(\"display_uri\", /*#__PURE__*/function () {\n                    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(err, payload) {\n                      var _this3$connector;\n\n                      var uri;\n                      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                        while (1) {\n                          switch (_context9.prev = _context9.next) {\n                            case 0:\n                              if (!err) {\n                                _context9.next = 3;\n                                break;\n                              }\n\n                              _this3.emit(ADAPTER_EVENTS.ERRORED, WalletLoginError.connectionError(\"Failed to display wallet connect qr code\"));\n\n                              return _context9.abrupt(\"return\", reject(err));\n\n                            case 3:\n                              uri = payload.params[0];\n\n                              _this3.updateAdapterData({\n                                uri: uri,\n                                extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n                              });\n\n                              (_this3$connector = _this3.connector) === null || _this3$connector === void 0 ? void 0 : _this3$connector.off(\"display_uri\");\n                              return _context9.abrupt(\"return\", resolve());\n\n                            case 7:\n                            case \"end\":\n                              return _context9.stop();\n                          }\n                        }\n                      }, _callee9);\n                    }));\n\n                    return function (_x6, _x7) {\n                      return _ref3.apply(this, arguments);\n                    };\n                  }());\n\n                  _this3.connector.createSession({\n                    chainId: parseInt(((_this3$chainConfig = _this3.chainConfig) === null || _this3$chainConfig === void 0 ? void 0 : _this3$chainConfig.chainId) || \"0x1\", 16)\n                  }).catch(function (error) {\n                    log.error(\"error while creating new wallet connect session\", error);\n\n                    _this3.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    return reject(error);\n                  });\n                }));\n\n              case 11:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function createNewSession() {\n        return _createNewSession.apply(this, arguments);\n      }\n\n      return createNewSession;\n    }()\n  }, {\n    key: \"onConnectHandler\",\n    value: function () {\n      var _onConnectHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(params) {\n        var chainId, _this$adapterOptions$6, _this$adapterOptions2, _this$adapterOptions3, connectedChainConfig, isCustomUi;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(!this.connector || !this.wcProvider)) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                if (this.chainConfig) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                throw WalletInitializationError.invalidParams(\"Chain config is not set\");\n\n              case 4:\n                chainId = params.chainId;\n                log.debug(\"connected chainId in hex\");\n\n                if (!(chainId !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                connectedChainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, chainId) || {\n                  chainId: \"0x\".concat(chainId.toString(16)),\n                  displayName: \"Unknown Network\"\n                };\n                isCustomUi = (_this$adapterOptions$6 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$6 === void 0 ? void 0 : _this$adapterOptions$6.qrcodeModal; // skipping network is not allowed in default ui. We are use network switching modal for default ui.\n\n                if (!(!isCustomUi || isCustomUi && !((_this$adapterOptions2 = this.adapterOptions) !== null && _this$adapterOptions2 !== void 0 && (_this$adapterOptions3 = _this$adapterOptions2.adapterSettings) !== null && _this$adapterOptions3 !== void 0 && _this$adapterOptions3.skipNetworkSwitching))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                _context11.prev = 10;\n                _context11.next = 13;\n                return this.addChain(this.chainConfig);\n\n              case 13:\n                _context11.next = 15;\n                return this.switchChain(connectedChainConfig, this.chainConfig);\n\n              case 15:\n                this.connector = this.getWalletConnectInstance();\n                _context11.next = 27;\n                break;\n\n              case 18:\n                _context11.prev = 18;\n                _context11.t0 = _context11[\"catch\"](10);\n                log.error(\"error while chain switching\", _context11.t0); // we need to create a new session since old session is already used and\n                // user needs to login again with correct chain with new qr code.\n\n                _context11.next = 23;\n                return this.createNewSession({\n                  forceNewSession: true\n                });\n\n              case 23:\n                this.emit(ADAPTER_EVENTS.ERRORED, WalletInitializationError.fromCode(5000, \"Not connected to correct network. Expected: \".concat(this.chainConfig.displayName, \", Current: \").concat((connectedChainConfig === null || connectedChainConfig === void 0 ? void 0 : connectedChainConfig.displayName) || chainId, \", Please switch to correct network from wallet\")));\n                this.status = ADAPTER_STATUS.READY;\n                this.rehydrated = true;\n                return _context11.abrupt(\"return\");\n\n              case 27:\n                _context11.next = 29;\n                return this.wcProvider.setupProvider(this.connector);\n\n              case 29:\n                this.subscribeEvents(this.connector);\n                this.status = ADAPTER_STATUS.CONNECTED;\n                this.emit(ADAPTER_EVENTS.CONNECTED, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1,\n                  reconnected: this.rehydrated\n                });\n\n              case 32:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[10, 18]]);\n      }));\n\n      function onConnectHandler(_x8) {\n        return _onConnectHandler.apply(this, arguments);\n      }\n\n      return onConnectHandler;\n    }()\n  }, {\n    key: \"subscribeEvents\",\n    value: function subscribeEvents(connector) {\n      var _this4 = this;\n\n      connector.on(\"session_update\", /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(error) {\n          return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  if (error) {\n                    _this4.emit(ADAPTER_EVENTS.ERRORED, error);\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12);\n        }));\n\n        return function (_x9) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"getWalletConnectInstance\",\n    value: function getWalletConnectInstance() {\n      var walletConnectOptions = this.adapterOptions.adapterSettings || {};\n      walletConnectOptions.bridge = walletConnectOptions.bridge || \"https://bridge.walletconnect.org\"; // Create a connector\n\n      return new WalletConnect(walletConnectOptions);\n    }\n  }]);\n\n  return WalletConnectV1Adapter;\n}(BaseEvmAdapter);\n\nexport { WalletConnectV1Adapter };","map":{"version":3,"sources":["../src/config.ts","../src/walletConnectV1adapter.ts"],"names":["WALLET_CONNECT_EXTENSION_ADAPTERS","name","chains","CHAIN_NAMESPACES","logo","mobile","native","universal","desktop","WalletConnectV1Adapter","BaseEvmAdapter","WALLET_ADAPTERS","WALLET_CONNECT_V1","ADAPTER_NAMESPACES","EIP155","ADAPTER_CATEGORY","EXTERNAL","ADAPTER_STATUS","NOT_READY","uri","extensionAdapters","adapterOptions","options","wcProvider","provider","getChainConfig","config","chainConfig","connector","ADAPTER_EVENTS","log","accounts","chainId","WalletInitializationError","skipLookupNetwork","skipNetworkSwitching","adapter","reject","payload","resolve","error","WalletLoginError","cleanup","networkSwitch","appOrigin","window","hostname","connectedChainConfig","currentChainConfig","newChainConfig","lookup","addChain","opts","forceNewSession","parseInt","off","params","displayName","isCustomUi","adapterSettings","reconnected","rehydrated","walletConnectOptions"],"mappings":";;;;;;;;;;;;;;AAEO,IAAMA,iCAAiC,GAAqC,CACjF;AACEC,EAAAA,IAAI,EADN,SAAA;AAEEC,EAAAA,MAAM,EAAE,CAACC,gBAAgB,CAF3B,MAEU,CAFV;AAGEC,EAAAA,IAAI,EAHN,8CAAA;AAIEC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EADA,UAAA;AAENC,IAAAA,SAAS,EAAE;AAFL,GAJV;AAQEC,EAAAA,OAAO,EAAE;AACPF,IAAAA,MAAM,EADC,EAAA;AAEPC,IAAAA,SAAS,EAAE;AAFJ;AARX,CADiF,EAcjF;AACEN,EAAAA,IAAI,EADN,UAAA;AAEEC,EAAAA,MAAM,EAAE,CAACC,gBAAgB,CAF3B,MAEU,CAFV;AAGEC,EAAAA,IAAI,EAHN,+CAAA;AAIEC,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EADA,WAAA;AAENC,IAAAA,SAAS,EAAE;AAFL,GAJV;AAQEC,EAAAA,OAAO,EAAE;AACPF,IAAAA,MAAM,EADC,EAAA;AAEPC,IAAAA,SAAS,EAAE;AAFJ;AARX,CAdiF,CAA5E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC2BDE,sBAAAA,GAAAA,aAAAA,UAAAA,eAAAA,EAAAA;;;;;AAwBJ,WAAA,sBAAA,CAAA,OAAA,EAAkD;AAAA,QAAA,KAAA;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,sBAAA,CAAA;;AAChD,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,OAAA,CAAA;;AADgD,IAAA,eAvB1BE,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAAA,MAAAA,EAAAA,eAAe,CAACC,iBAAhBD,CAuB0B;;AAAA,IAAA,eArBAE,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAAA,kBAAAA,EAAAA,kBAAkB,CAACC,MAAnBD,CAqBA;;AAAA,IAAA,eAnBGV,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAAA,uBAAAA,EAAAA,gBAAgB,CAACW,MAAjBX,CAmBH;;AAAA,IAAA,eAjBXY,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAAA,MAAAA,EAAAA,gBAAgB,CAACC,QAAjBD,CAiBW;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,gBAAA,EAAA,KAAA,CAAA,CAAA;;AAAA,IAAA,eAbbE,CAAAA,sBAAAA,CAAAA,KAAAA,CAAAA,EAAAA,QAAAA,EAAAA,cAAc,CAACC,SAAfD,CAaa;;AAAA,IAAA,eAXR,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,aAAA,EAAA;AACxCE,MAAAA,GAAG,EADqC,EAAA;AAExCC,MAAAA,iBAAiB,EAAEpB;AAFqB,KAAA,CAWQ;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,WAAA,EANT,IAMS,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,YAAA,EAJC,IAID,CAAA;;AAAA,IAAA,eAAA,CAAA,sBAAA,CAAA,KAAA,CAAA,EAAA,YAAA,EAF7B,KAE6B,CAAA;;AAEhD,IAAA,KAAKqB,CAAL,cAAA,GAAA,aAAA,CAAA,EAAA,EAAA,OAAA,CAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAmBC,OAAO,CAAPA,WAAAA,IAAnB,IAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAmBA,OAAO,CAAPA,WAAAA,IAAnB,KAAA;AAJgD,WAAA,KAAA;AAKjD;;;;SAED,SAAa,GAAb,GAAa;AAAA,UAAA,eAAA;;AACX,aAAO,CAAC,EAAC,CAAA,eAAA,GAAA,KAAD,SAAC,MAAA,IAAA,IAAA,eAAA,KAAA,KAAA,CAAA,IAAA,eAAA,CAAT,SAAQ,CAAR;AACD;;;SAED,SAAY,GAAZ,GAAY;AAAA,UAAA,gBAAA;;AACV,aAAO,CAAKC,CAAAA,gBAAAA,GAAAA,KAAL,UAAKA,MAAYC,IAAZD,IAAYC,gBAAAA,KAAAA,KAAAA,CAAZD,GAAYC,KAAAA,CAAZD,GAAYC,gBAAAA,CAAjB,QAAA,KAAP,IAAA;;AAGF,IAAA,GAAA,EAAA,SAAA,GAAA,CAAA,CAAA,EAA+C;AAC7C,YAAM,IAAA,KAAA,CAAN,iBAAM,CAAN;AACD;;;;AAED,UAAA,KAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,OAAA,GAAA;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,QAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,QAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AACE,gBAAA,IAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,iCAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA;;AACA,oBAAI,CAAC,KAAL,WAAA,EAAuB;AACrB,uBAAA,WAAA,GAAmBC,cAAc,CAACtB,gBAAgB,CAAjB,MAAA,EAAjC,CAAiC,CAAjC;AAHJ,iBAAA,CAAA;;;AAME,qBAAA,SAAA,GAAiB,KAAjB,wBAAiB,EAAjB;AACA,qBAAA,UAAA,GAAkB,IAAA,qBAAA,CAA0B;AAAEuB,kBAAAA,MAAM,EAAE;AAAEC,oBAAAA,WAAW,EAAE,KAAKA;AAApB,mBAAV;AAAkEC,kBAAAA,SAAS,EAAE,KAAKA;AAAlF,iBAA1B,CAAlB;AAEA,qBAAA,IAAA,CAAUC,cAAc,CAAxB,KAAA,EAAgClB,eAAe,CAA/C,iBAAA;AACA,qBAAA,MAAA,GAAcM,cAAc,CAA5B,KAAA;AACAa,gBAAAA,GAAG,CAAHA,KAAAA,CAAAA,wCAAAA;;AAXF,oBAYM,CAAA,KAAA,SAAA,CAZN,SAAA,EAAA;AAAA,kBAAA,QAAA,CAAA,IAAA,GAAA,EAAA;AAAA;AAAA;;AAaI,qBAAA,UAAA,GAAA,IAAA;AAbJ,gBAAA,QAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAcU,KAAA,gBAAA,CAAsB;AAAEC,kBAAAA,QAAQ,EAAE,KAAA,SAAA,CAAZ,QAAA;AAAqCC,kBAAAA,OAAO,EAAE,KAAA,SAAA,CAAeA;AAA7D,iBAAtB,CAdV;;AAAA,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,QAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,OAAA,EAAA,IAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;;AAkBA,UAAA,QAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,GAAA;AAAA,YAAA,MAAA,GAAA,IAAA;;AAAA,YAAA,qBAAA,EAAA,sBAAA;;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AACE,gBAAA,IAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,6BAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA;;AADF,oBAEO,KAFP,SAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBAE6BC,yBAAyB,CAAzBA,QAAAA,CAF7B,iCAE6BA,CAF7B;;AAAA,mBAAA,CAAA;AAAA,oBAAA,CAIM,KAJN,SAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAKU,KAAA,gBAAA,CAAsB;AAAEF,kBAAAA,QAAQ,EAAE,KAAA,SAAA,CAAZ,QAAA;AAAqCC,kBAAAA,OAAO,EAAE,KAAA,SAAA,CAAeA;AAA7D,iBAAtB,CALV;;AAAA,mBAAA,CAAA;AAAA,uBAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EAMW,KANX,QAAA,CAAA;;AAAA,mBAAA,CAAA;AAAA,oBAAA,EASM,KAAA,MAAA,KAAgBf,cAAc,CATpC,UAAA,CAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,EAAA;AAAA;AAAA,iBAAA,CAUI;AACA;;;AACA,oBAAA,CAAA,qBAAA,GAAI,KAAA,cAAA,CAAJ,eAAA,MAAI,IAAJ,IAAI,qBAAA,KAAA,KAAA,CAAJ,IAAI,qBAAA,CAAJ,WAAA,EAAsD;AACpD,uBAAA,SAAA,GAAiB,KAAjB,wBAAiB,EAAjB;AACA,uBAAA,UAAA,GAAkB,IAAA,qBAAA,CAA0B;AAC1CS,oBAAAA,MAAM,EAAE;AACNC,sBAAAA,WAAW,EAAE,KADP,WAAA;AAEN;AACAO,sBAAAA,iBAAiB,EAAA,CAAA,sBAAA,GAAE,KAAA,cAAA,CAAF,eAAA,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAE,sBAAqCC,CAAAA;AAHlD,qBADkC;AAM1CP,oBAAAA,SAAS,EAAE,KAAKA;AAN0B,mBAA1B,CAAlB;AAQD;;AAtBL,gBAAA,SAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAuBU,KAvBV,gBAuBU,EAvBV;;AAAA,mBAAA,EAAA;AAwBI,qBAAA,MAAA,GAAcX,cAAc,CAA5B,UAAA;AACA,qBAAA,IAAA,CAAUY,cAAc,CAAxB,UAAA,EAAqC;AAAEO,kBAAAA,OAAO,EAAEzB,eAAe,CAACC;AAA3B,iBAArC;;AAzBJ,mBAAA,EAAA;AAAA,uBAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EA2BS,IAAA,OAAA,CAAY,UAAA,OAAA,EAAA,MAAA,EAAoB;AACrC,sBAAI,CAAC,MAAI,CAAT,SAAA,EAAqB,OAAOyB,MAAM,CAACJ,yBAAyB,CAAzBA,QAAAA,CADE,iCACFA,CAAD,CAAb,CADgB,CAAA;;AAGrC,kBAAA,MAAI,CAAJ,SAAA,CAAA,EAAA,CAAA,cAAA,EAAA,aAAkC,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,GAAA;AAAA,2BAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,6BAAA,CAAA,EAAA;AAAA,gCAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,+BAAA,CAAA;AAChC,4BAAA,MAAI,CAAJ,MAAA,GAAchB,cAAc,CAA5B,KAAA;;AACA,4BAAA,MAAI,CAAJ,IAAA,CAAUY,cAAc,CAAxB,KAAA,EAAgClB,eAAe,CAA/C,iBAAA;;AAFgC,mCAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EAGzB0B,MAAM,CAAC,IAAA,KAAA,CAHkB,mBAGlB,CAAD,CAHmB,CAAA;;AAAA,+BAAA,CAAA;AAAA,+BAAA,KAAA;AAAA,mCAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,qBAAA,EAAA,QAAA,CAAA;AAAlC,mBAAkC,CAAA,CAAlC;;AAKA,sBAAI;AACF;AACA,oBAAA,MAAI,CAAJ,SAAA,CAAA,EAAA,CAAA,SAAA,EAAA,aAAA,YAAA;AAAA,0BAA6B,KAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,KAAA,EAAA,OAAA,EAAA;AAAA,+BAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iCAAA,CAAA,EAAA;AAAA,oCAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mCAAA,CAAA;AAC3B,oCAAA,KAAA,EAAW;AACT,kCAAA,MAAI,CAAJ,IAAA,CAAUR,cAAc,CAAxB,OAAA,EAAA,KAAA;AACD;;AACDC,gCAAAA,GAAG,CAAHA,KAAAA,CAAAA,qCAAAA;AAJ2B,gCAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uCAKrB,MAAI,CAAJ,gBAAA,CAAsBQ,OAAO,CAAPA,MAAAA,CALD,CAKCA,CAAtB,CALqB;;AAAA,mCAAA,CAAA;AAAA,uCAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EAMpBC,OAAO,CAAC,MAAI,CANQ,QAMb,CANa,CAAA;;AAAA,mCAAA,CAAA;AAAA,mCAAA,KAAA;AAAA,uCAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,yBAAA,EAAA,QAAA,CAAA;AAA7B,uBAA6B,CAAA,CAA7B;;AAAA,6BAAA,UAAA,EAAA,EAAA,GAAA,EAAA;AAAA,+BAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA,uBAAA;AAAA,qBAAA,EAAA;AAFF,mBAAA,CAUE,OAAA,KAAA,EAAuB;AACvBT,oBAAAA,GAAG,CAAHA,KAAAA,CAAAA,kDAAAA,EADuB,KACvBA,EADuB,CAAA;;AAGvB,oBAAA,MAAI,CAAJ,MAAA,GAAcb,cAAc,CAA5B,KAAA;AACA,oBAAA,MAAI,CAAJ,UAAA,GAAA,IAAA;;AACA,oBAAA,MAAI,CAAJ,IAAA,CAAUY,cAAc,CAAxB,OAAA,EAAA,KAAA;;AACAQ,oBAAAA,MAAM,CACJG,KAAK,YAALA,aAAAA,GAAAA,KAAAA,GAEIC,gBAAgB,CAAhBA,eAAAA,CAA0E,wCAAA,MAAA,CAAA,CAAA,KAAe,KAAf,IAAA,IAAA,KAAe,KAAA,KAAf,CAAA,GAAA,KAAA,CAAA,GAAA,KAAe,CAAf,OAAA,KAHhFJ,EAGgF,CAA1EI,CAHA,CAANJ;AAKD;AAxDL,iBA2BS,CA3BT,CAAA;;AAAA,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;AA4DA,IAAA,KAAA,EAAA,SAAA,kBAAA,CAAA,OAAA,EAAuE;AACrE,UAAI,KAAA,MAAA,KAAgBpB,cAAc,CAAlC,KAAA,EAA0C;;AAC1C,UAAIK,OAAJ,KAAIA,IAAAA,IAAAA,OAAJ,KAAA,KAAA,CAAIA,IAAAA,OAAO,CAAX,WAAA,EAA0B;AACxB,aAAA,WAAA,GAAmBA,OAAO,CAA1B,WAAA;AACD;;AACD,UAAIA,OAAJ,KAAIA,IAAAA,IAAAA,OAAJ,KAAA,KAAA,CAAIA,IAAAA,OAAO,CAAX,QAAA,EAAuB;AACrB,aAAA,QAAA,GAAgBA,OAAO,CAAvB,QAAA;AACD;AACF;;;;AAED,UAAA,YAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,GAAA;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAA,oBACO,KADP,SAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBAC6BmB,gBAAgB,CAAhBA,iBAAAA,CAD7B,uDAC6BA,CAD7B;;AAAA,mBAAA,CAAA;AAAA,uBAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EAAA,EAAA,CAAA;;AAAA,mBAAA,CAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;;AAKA,UAAA,WAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,GAAA;AAAA,YAAA,OAAA;AAAA,YAAA,OAAA;AAAA,YAAA,MAAA,GAAA,SAAA;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAiBnB,gBAAAA,OAAjB,GAAiD,MAAA,CAAA,MAAA,GAAA,CAAA,IAAA,MAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,MAAA,CAAA,CAAA,CAAA,GAAA;AAAEoB,kBAAAA,OAAO,EAAE;AAAX,iBAAhCpB;AACPoB,gBAAAA,OADV,GACsBpB,OADtB,CAAA,OACUoB;;AADV,oBAAA,EAEM,CAAC,KAAD,SAAA,IAAmB,CAAC,KAF1B,SAAA,CAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBAEgDD,gBAAgB,CAAhBA,iBAAAA,CAFhD,2BAEgDA,CAFhD;;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAAA,IAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,SAAA,CAAA,EAAA,YAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA,CAAA;;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAIQ,KAAA,SAAA,CAJR,WAIQ,EAJR;;AAAA,mBAAA,CAAA;AAKE,qBAAA,UAAA,GAAA,KAAA;;AACA,oBAAA,OAAA,EAAa;AACX,uBAAA,SAAA,GAAA,IAAA;AACA,uBAAA,MAAA,GAAcxB,cAAc,CAA5B,SAAA;AACA,uBAAA,UAAA,GAAA,IAAA;AAHF,iBAAA,MAIO;AACL;AACA,uBAAA,MAAA,GAAcA,cAAc,CAA5B,KAAA;AACD;;AACD,qBAAA,IAAA,CAAUY,cAAc,CAAxB,YAAA;;AAdF,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;;AAiBQ,UAAA,SAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,WAAA,EAAA;AAAA,YAAA,sBAAA,EAAA,aAAA;;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;;AAAA,oBAEC,KAFD,UAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBAEwBI,yBAAyB,CAAzBA,QAAAA,CAFxB,iCAEwBA,CAFxB;;AAAA,mBAAA,CAAA;AAGEU,gBAAAA,aAHF,GAAA,CAAA,sBAAA,GAGkB,KAAA,cAAA,CAHlB,eAAA,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAGkB,sBAAA,CAHlB,kBAGEA;;AAHF,oBAAA,CAAA,aAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAKI,aAAa,CAAb,UAAA,CAAyB;AAAEhB,kBAAAA,WAAW,EAAb,WAAA;AAAeiB,kBAAAA,SAAS,EAAEC,MAAM,CAANA,QAAAA,CAAgBC;AAA1C,iBAAzB,CALJ;;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAOE,KAAA,UAAA,CAAA,QAAA,CAPF,WAOE,CAPF;;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,EAAA;AAAA;;AAAA,mBAAA,EAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,EAAA;AAAA,gBAAA,SAAA,CAAA,EAAA,GAAA,SAAA,CAAA,OAAA,CAAA,CAAA,CAAA,CAAA;AASJhB,gBAAAA,GAAG,CAAHA,KAAAA,CAAAA,SAAAA,CAAAA,EAAAA;;AATI,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,QAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;;kFAaA,SAAkBiB,QAAlB,CAAA,oBAAA,EAAA,WAAA,EAAA;AAAA,YAAA,sBAAA;;AAAA,YAAA,aAAA;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAA,oBACD,KADC,UAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBACsBd,yBAAyB,CAAzBA,QAAAA,CADtB,iCACsBA,CADtB;;AAAA,mBAAA,CAAA;AAEAU,gBAAAA,aAFA,GAAA,CAAA,sBAAA,GAEgB,KAAA,cAAA,CAFhB,eAAA,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAEgB,sBAAA,CAFhB,kBAEAA;;AAFA,oBAAA,CAAA,aAAA,EAAA;AAAA,kBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAKE,aAAa,CAAb,aAAA,CAA4B;AAChCK,kBAAAA,kBAAkB,EADc,WAAA;AAEhCC,kBAAAA,cAAc,EAFkB,oBAAA;AAGhCL,kBAAAA,SAAS,EAAEC,MAAM,CAANA,QAAAA,CAAgBC;AAHK,iBAA5B,CALF;;AAAA,mBAAA,CAAA;AAAA,gBAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAWA,KAAA,UAAA,CAAA,WAAA,CAA4B;AAAEd,kBAAAA,OAAO,EAAEL,WAAW,CAAtB,OAAA;AAAgCuB,kBAAAA,MAAM,EAAtC,KAAA;AAA+CC,kBAAAA,QAAQ,EAAE;AAAzD,iBAA5B,CAXA;;AAAA,mBAAA,CAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,QAAA,EAAA,IAAA,CAAA;;;;;;;;;;;;AAcA,UAAA,iBAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,GAAA;AAAA,YAAA,oBAAA;AAAA,YAAA,sBAAA;AAAA,YAAA,MAAA,GAAA,IAAA;;AAAA,YAAA,IAAA;AAAA,YAAA,iBAAA;AAAA,YAAA,OAAA,GAAA,SAAA;;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,UAAA,CAAA,UAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,UAAA,CAAA,IAAA,GAAA,UAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAuBC,gBAAAA,IAAvB,GAA4D,OAAA,CAAA,MAAA,GAAA,CAAA,IAAA,OAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,OAAA,CAAA,CAAA,CAAA,GAAA;AAAEC,kBAAAA,eAAe,EAAE;AAAnB,iBAArCD;;AAAvB,oBACD,KADC,SAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBACqBnB,yBAAyB,CAAzBA,QAAAA,CADrB,iCACqBA,CADrB;;AAAA,mBAAA,CAAA;AAAA,oBAAA,EAEFmB,IAAI,CAAJA,eAAAA,IAAwB,KAAA,SAAA,CAFtB,OAAA,CAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAGE,KAAA,SAAA,CAHF,WAGE,EAHF;;AAAA,mBAAA,CAAA;AAAA,oBAAA,EAAA,CAAA,oBAAA,GAMF,KANE,cAAA,MAAA,IAAA,IAAA,oBAAA,KAAA,KAAA,CAAA,IAAA,CAAA,sBAAA,GAMF,oBAAA,CANE,eAAA,MAAA,IAAA,IAAA,sBAAA,KAAA,KAAA,CAAA,IAMF,sBAAA,CANE,WAAA,CAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA;AAAA;;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA,uBAOE,KAAA,SAAA,CAAA,aAAA,CAA6B;AAAEpB,kBAAAA,OAAO,EAAEsB,QAAQ,CAAC,CAAK3B,CAAAA,iBAAAA,GAAAA,KAAL,WAAKA,MAAL,IAAKA,IAAL,iBAAA,KAAA,KAAA,CAAKA,GAAL,KAAA,CAAKA,GAAL,iBAAA,CAAA,OAAA,KAAD,KAAA,EAAA,EAAA;AAAnB,iBAA7B,CAPF;;AAAA,mBAAA,CAAA;AAAA,uBAAA,UAAA,CAAA,MAAA,CAAA,QAAA,CAAA;;AAAA,mBAAA,EAAA;AAAA,uBAAA,UAAA,CAAA,MAAA,CAAA,QAAA,EAYC,IAAA,OAAA,CAAkB,UAAA,OAAA,EAAA,MAAA,EAAoB;AAAA,sBAAA,kBAAA;;AAC3C,sBAAI,CAAC,MAAI,CAAT,SAAA,EAAqB,OAAOU,MAAM,CAACJ,yBAAyB,CAAzBA,QAAAA,CAAd,iCAAcA,CAAD,CAAb;AACrBH,kBAAAA,GAAG,CAAHA,KAAAA,CAAAA,kDAAAA;;AACA,kBAAA,MAAI,CAAJ,SAAA,CAAA,EAAA,CAAA,aAAA,EAAA,aAAA,YAAA;AAAA,wBAAiC,KAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,QAAA,CAAA,GAAA,EAAA,OAAA,EAAA;AAAA,0BAAA,gBAAA;;AAAA,0BAAA,GAAA;AAAA,6BAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,SAAA,EAAA;AAAA,+BAAA,CAAA,EAAA;AAAA,kCAAA,SAAA,CAAA,IAAA,GAAA,SAAA,CAAA,IAAA;AAAA,iCAAA,CAAA;AAAA,kCAAA,CAAA,GAAA,EAAA;AAAA,gCAAA,SAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAE7B,8BAAA,MAAI,CAAJ,IAAA,CAAUD,cAAc,CAAxB,OAAA,EAAkCY,gBAAgB,CAAhBA,eAAAA,CAAlC,0CAAkCA,CAAlC;;AAF6B,qCAGtBJ,SAAAA,CAAAA,MAAAA,CAAAA,QAAAA,EAAAA,MAAM,CAHgB,GAGhB,CAANA,CAHsB;;AAAA,iCAAA,CAAA;AAKzBlB,8BAAAA,GALyB,GAKnBmB,OAAO,CAAPA,MAAAA,CALmB,CAKnBA,CAANnB;;AACN,8BAAA,MAAI,CAAJ,iBAAA,CAAuB;AAAEA,gCAAAA,GAAG,EAAL,GAAA;AAAOC,gCAAAA,iBAAiB,EAAEpB;AAA1B,+BAAvB;;AAEA,+BAAA,gBAAA,GAAA,MAAI,CAAJ,SAAA,MAAgBuD,IAAhB,IAAgBA,gBAAAA,KAAAA,KAAAA,CAAhB,GAAgBA,KAAAA,CAAhB,GAAgBA,gBAAAA,CAAhB,GAAgBA,CAAhB,aAAgBA,CAAhB;AAR+B,qCAAA,SAAA,CAAA,MAAA,CAAA,QAAA,EASxBhB,OATwB,EAAA,CAAA;;AAAA,iCAAA,CAAA;AAAA,iCAAA,KAAA;AAAA,qCAAA,SAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,uBAAA,EAAA,QAAA,CAAA;AAAjC,qBAAiC,CAAA,CAAjC;;AAAA,2BAAA,UAAA,GAAA,EAAA,GAAA,EAAA;AAAA,6BAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA,qBAAA;AAAA,mBAAA,EAAA;;AAYA,kBAAA,MAAI,CAAJ,SAAA,CAAA,aAAA,CAA6B;AAAEP,oBAAAA,OAAO,EAAEsB,QAAQ,CAAC,CAAI,CAAA,kBAAA,GAAA,MAAA,CAAJ,WAAI,MAAJ,IAAI,IAAJ,kBAAA,KAAA,KAAA,CAAI,GAAJ,KAAA,CAAI,GAAJ,kBAAA,CAAA,OAAA,KAAD,KAAA,EAAA,EAAA;AAAnB,mBAA7B,EAAA,KAAA,CAAkG,UAAA,KAAA,EAAU;AAC1GxB,oBAAAA,GAAG,CAAHA,KAAAA,CAAAA,iDAAAA,EAAAA,KAAAA;;AACA,oBAAA,MAAI,CAAJ,IAAA,CAAUD,cAAc,CAAxB,OAAA,EAAA,KAAA;;AACA,2BAAOQ,MAAM,CAAb,KAAa,CAAb;AAHF,mBAAA;AA3BI,iBAYC,CAZD,CAAA;;AAAA,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,UAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,SAAA,EAAA,IAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;;AAmCA,UAAA,iBAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,SAAA,CAAA,MAAA,EAAA;AAAA,YAAA,OAAA,EAAA,sBAAA,EAAA,qBAAA,EAAA,qBAAA,EAAA,oBAAA,EAAA,UAAA;;AAAA,eAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,UAAA,CAAA,UAAA,EAAA;AAAA,iBAAA,CAAA,EAAA;AAAA,oBAAA,UAAA,CAAA,IAAA,GAAA,UAAA,CAAA,IAAA;AAAA,mBAAA,CAAA;AAAA,oBAAA,EACF,CAAC,KAAD,SAAA,IAAmB,CAAC,KADlB,UAAA,CAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBACyCJ,yBAAyB,CAAzBA,QAAAA,CADzC,iCACyCA,CADzC;;AAAA,mBAAA,CAAA;AAAA,oBAED,KAFC,WAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,CAAA;AAAA;AAAA;;AAAA,sBAEuBA,yBAAyB,CAAzBA,aAAAA,CAFvB,yBAEuBA,CAFvB;;AAAA,mBAAA,CAAA;AAIED,gBAAAA,OAJF,GAIcwB,MAJd,CAAA,OAIExB;AACRF,gBAAAA,GAAG,CAAHA,KAAAA,CAAAA,0BAAAA;;AALM,oBAMFE,EAAAA,OAAO,KAAKsB,QAAQ,CAAC,KAAA,WAAA,CAAD,OAAA,EANlB,EAMkB,CAApBtB,CANE,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA;AAAA;;AAOEe,gBAAAA,oBAPF,GAOyBtB,cAAc,CAACtB,gBAAgB,CAAjB,MAAA,EAAdsB,OAAc,CAAdA,IAAoD;AAC/EO,kBAAAA,OAAO,EAAA,KAAA,MAAA,CAAOA,OAAO,CAAPA,QAAAA,CADiE,EACjEA,CAAP,CADwE;AAE/EyB,kBAAAA,WAAW,EAAE;AAFkE,iBAA3EV;AAKAW,gBAAAA,UAZF,GAAA,CAAA,sBAAA,GAYe,KAAA,cAAA,CAZf,eAAA,MAYe,IAZf,IAYe,sBAAA,KAAA,KAAA,CAZf,GAYe,KAAA,CAZf,GAYe,sBAAA,CAZf,WAYEA,CAZF,CAaJ;;AAbI,oBAAA,EAcA,CAAA,UAAA,IAAgBA,UAAU,IAAI,EAAC,CAAA,qBAAA,GAAA,KAAD,cAAC,MAAD,IAAC,IAAD,qBAAA,KAAA,KAAA,CAAC,IAAD,CAAA,qBAAA,GAAC,qBAAqBC,CAAtB,eAAA,MAAC,IAAA,IAAA,qBAAA,KAAA,KAAA,CAAA,IAAA,qBAAA,CAd/B,oBAc8B,CAd9B,CAAA,EAAA;AAAA,kBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA;AAAA;;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAgBM,KAAA,QAAA,CAAc,KAhBpB,WAgBM,CAhBN;;AAAA,mBAAA,EAAA;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAiBM,KAAA,WAAA,CAAA,oBAAA,EAAuC,KAjB7C,WAiBM,CAjBN;;AAAA,mBAAA,EAAA;AAkBA,qBAAA,SAAA,GAAiB,KAAjB,wBAAiB,EAAjB;AAlBA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA;;AAAA,mBAAA,EAAA;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,gBAAA,UAAA,CAAA,EAAA,GAAA,UAAA,CAAA,OAAA,CAAA,CAAA,EAAA,CAAA;AAoBA7B,gBAAAA,GAAG,CAAHA,KAAAA,CAAAA,6BAAAA,EAAAA,UAAAA,CApBA,EAoBAA,EApBA,CAAA;AAsBA;;AAtBA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAuBM,KAAA,gBAAA,CAAsB;AAAEuB,kBAAAA,eAAe,EAAE;AAAnB,iBAAtB,CAvBN;;AAAA,mBAAA,EAAA;AAwBA,qBAAA,IAAA,CACExB,cAAc,CADhB,OAAA,EAEEI,yBAAyB,CAAzBA,QAAAA,CAAAA,IAAAA,EAAAA,+CAAAA,MAAAA,CAEiD,KAAA,WAAA,CAFjDA,WAAAA,EAGI,aAHJA,EAGI,MAHJA,CAGI,CAAA,oBAAoB,KAApB,IAAA,IAAA,oBAAoB,KAApB,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,oBAAoB,CAApB,WAAA,KAHJA,OAAAA,EAFF,gDAEEA,CAAAA,CAFF;AASA,qBAAA,MAAA,GAAchB,cAAc,CAA5B,KAAA;AACA,qBAAA,UAAA,GAAA,IAAA;AAlCA,uBAAA,UAAA,CAAA,MAAA,CAAA,QAAA,CAAA;;AAAA,mBAAA,EAAA;AAAA,gBAAA,UAAA,CAAA,IAAA,GAAA,EAAA;AAAA,uBAuCA,KAAA,UAAA,CAAA,aAAA,CAA8B,KAvC9B,SAuCA,CAvCA;;AAAA,mBAAA,EAAA;AAwCN,qBAAA,eAAA,CAAqB,KAArB,SAAA;AACA,qBAAA,MAAA,GAAcA,cAAc,CAA5B,SAAA;AACA,qBAAA,IAAA,CAAUY,cAAc,CAAxB,SAAA,EAAoC;AAAEO,kBAAAA,OAAO,EAAEzB,eAAe,CAA1B,iBAAA;AAA8CiD,kBAAAA,WAAW,EAAE,KAAKC;AAAhE,iBAApC;;AA1CM,mBAAA,EAAA;AAAA,mBAAA,KAAA;AAAA,uBAAA,UAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,SAAA,EAAA,SAAA,EAAA,IAAA,EAAA,CAAA,CAAA,EAAA,EAAA,EAAA,CAAA,CAAA,CAAA;OAAA,CAAA,CAAA;;;;;;;;;;AA6CA,IAAA,KAAA,EAAA,SAAA,eAAA,CAAA,SAAA,EAAwC;AAAA,UAAA,MAAA,GAAA,IAAA;;AAC9C,MAAA,SAAS,CAAT,EAAA,CAAA,gBAAA,EAAA,aAAA,YAAA;AAAA,YAAA,KAAA,GAAA,iBAAA,EAAA,aAAA,mBAAA,CAAA,IAAA,CAA+B,SAAA,SAAA,CAAA,KAAA,EAAA;AAAA,iBAAA,mBAAA,CAAA,IAAA,CAAA,SAAA,UAAA,CAAA,UAAA,EAAA;AAAA,mBAAA,CAAA,EAAA;AAAA,sBAAA,UAAA,CAAA,IAAA,GAAA,UAAA,CAAA,IAAA;AAAA,qBAAA,CAAA;AAC7B,sBAAA,KAAA,EAAW;AACT,oBAAA,MAAI,CAAJ,IAAA,CAAUhC,cAAc,CAAxB,OAAA,EAAA,KAAA;AACD;;AAH4B,qBAAA,CAAA;AAAA,qBAAA,KAAA;AAAA,yBAAA,UAAA,CAAA,IAAA,EAAA;AAAA;AAAA;AAAA,WAAA,EAAA,SAAA,CAAA;AAA/B,SAAA,CAAA,CAAA;;AAAA,eAAA,UAAA,GAAA,EAAA;AAAA,iBAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA,SAAA,CAAA;AAAA,SAAA;AAAA,OAAA,EAAA;AAKD;;;WAEO,SAAwB,wBAAxB,GAAwB;AAC9B,UAAMiC,oBAAoB,GAAG,KAAA,cAAA,CAAA,eAAA,IAA7B,EAAA;AACAA,MAAAA,oBAAoB,CAApBA,MAAAA,GAA8BA,oBAAoB,CAApBA,MAAAA,IAFA,kCAE9BA,CAF8B,CAAA;;AAI9B,aAAO,IAAA,aAAA,CAAP,oBAAO,CAAP;AACD;;;;CAjRGrD,CAA+BC,cAA/BD,C","sourcesContent":["import _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport WalletConnect from '@walletconnect/client';\nimport { CHAIN_NAMESPACES, WALLET_ADAPTERS, ADAPTER_NAMESPACES, ADAPTER_CATEGORY, ADAPTER_STATUS, getChainConfig, ADAPTER_EVENTS, log, WalletInitializationError, Web3AuthError, WalletLoginError } from '@web3auth/base';\nimport { BaseEvmAdapter } from '@web3auth/base-evm-adapter';\nimport { WalletConnectProvider } from '@web3auth/ethereum-provider';\n\nvar WALLET_CONNECT_EXTENSION_ADAPTERS = [{\n  name: \"Rainbow\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-rainbow.svg\",\n  mobile: {\n    native: \"rainbow:\",\n    universal: \"https://rnbwapp.com\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}, {\n  name: \"MetaMask\",\n  chains: [CHAIN_NAMESPACES.EIP155],\n  logo: \"https://images.web3auth.io/login-metamask.svg\",\n  mobile: {\n    native: \"metamask:\",\n    universal: \"https://metamask.app.link\"\n  },\n  desktop: {\n    native: \"\",\n    universal: \"\"\n  }\n}];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar WalletConnectV1Adapter = /*#__PURE__*/function (_BaseEvmAdapter) {\n  _inherits(WalletConnectV1Adapter, _BaseEvmAdapter);\n\n  var _super = _createSuper(WalletConnectV1Adapter);\n\n  function WalletConnectV1Adapter(options) {\n    var _this;\n\n    _classCallCheck(this, WalletConnectV1Adapter);\n\n    _this = _super.call(this, options);\n\n    _defineProperty(_assertThisInitialized(_this), \"name\", WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterNamespace\", ADAPTER_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"currentChainNamespace\", CHAIN_NAMESPACES.EIP155);\n\n    _defineProperty(_assertThisInitialized(_this), \"type\", ADAPTER_CATEGORY.EXTERNAL);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterOptions\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"status\", ADAPTER_STATUS.NOT_READY);\n\n    _defineProperty(_assertThisInitialized(_this), \"adapterData\", {\n      uri: \"\",\n      extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"connector\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"wcProvider\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"rehydrated\", false);\n\n    _this.adapterOptions = _objectSpread({}, options);\n    _this.chainConfig = options.chainConfig || null;\n    _this.sessionTime = options.sessionTime || 86400;\n    return _this;\n  }\n\n  _createClass(WalletConnectV1Adapter, [{\n    key: \"connected\",\n    get: function get() {\n      var _this$connector;\n\n      return !!((_this$connector = this.connector) !== null && _this$connector !== void 0 && _this$connector.connected);\n    }\n  }, {\n    key: \"provider\",\n    get: function get() {\n      var _this$wcProvider;\n\n      return ((_this$wcProvider = this.wcProvider) === null || _this$wcProvider === void 0 ? void 0 : _this$wcProvider.provider) || null;\n    },\n    set: function set(_) {\n      throw new Error(\"Not implemented\");\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkInitializationRequirements\", this).call(this);\n\n                if (!this.chainConfig) {\n                  this.chainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, 1);\n                } // Create a connector\n\n\n                this.connector = this.getWalletConnectInstance();\n                this.wcProvider = new WalletConnectProvider({\n                  config: {\n                    chainConfig: this.chainConfig\n                  },\n                  connector: this.connector\n                });\n                this.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n                this.status = ADAPTER_STATUS.READY;\n                log.debug(\"initializing wallet connect v1 adapter\");\n\n                if (!this.connector.connected) {\n                  _context.next = 11;\n                  break;\n                }\n\n                this.rehydrated = true;\n                _context.next = 11;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this2 = this;\n\n        var _this$adapterOptions$, _this$adapterOptions$2;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"checkConnectionRequirements\", this).call(this);\n\n                if (this.connector) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!this.connected) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 6;\n                return this.onConnectHandler({\n                  accounts: this.connector.accounts,\n                  chainId: this.connector.chainId\n                });\n\n              case 6:\n                return _context4.abrupt(\"return\", this.provider);\n\n              case 7:\n                if (!(this.status !== ADAPTER_STATUS.CONNECTING)) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                // for wallet connect qr code modal we have to create a new connector, coz wallet connect internally does not open\n                // modal again on existing instance if connection is pending.\n                if ((_this$adapterOptions$ = this.adapterOptions.adapterSettings) !== null && _this$adapterOptions$ !== void 0 && _this$adapterOptions$.qrcodeModal) {\n                  this.connector = this.getWalletConnectInstance();\n                  this.wcProvider = new WalletConnectProvider({\n                    config: {\n                      chainConfig: this.chainConfig,\n                      // network switching can be skipped with custom ui\n                      skipLookupNetwork: (_this$adapterOptions$2 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$2 === void 0 ? void 0 : _this$adapterOptions$2.skipNetworkSwitching\n                    },\n                    connector: this.connector\n                  });\n                }\n\n                _context4.next = 11;\n                return this.createNewSession();\n\n              case 11:\n                this.status = ADAPTER_STATUS.CONNECTING;\n                this.emit(ADAPTER_EVENTS.CONNECTING, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1\n                });\n\n              case 13:\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  if (!_this2.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\")); // for wallet connect default modal.\n\n                  _this2.connector.on(\"modal_closed\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _this2.status = ADAPTER_STATUS.READY;\n\n                            _this2.emit(ADAPTER_EVENTS.READY, WALLET_ADAPTERS.WALLET_CONNECT_V1);\n\n                            return _context2.abrupt(\"return\", reject(new Error(\"User closed modal\")));\n\n                          case 3:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  })));\n\n                  try {\n                    // Subscribe to session connection\n                    _this2.connector.on(\"connect\", /*#__PURE__*/function () {\n                      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(error, payload) {\n                        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                          while (1) {\n                            switch (_context3.prev = _context3.next) {\n                              case 0:\n                                if (error) {\n                                  _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n                                }\n\n                                log.debug(\"connected event emitted by web3auth\");\n                                _context3.next = 4;\n                                return _this2.onConnectHandler(payload.params[0]);\n\n                              case 4:\n                                return _context3.abrupt(\"return\", resolve(_this2.provider));\n\n                              case 5:\n                              case \"end\":\n                                return _context3.stop();\n                            }\n                          }\n                        }, _callee3);\n                      }));\n\n                      return function (_x, _x2) {\n                        return _ref2.apply(this, arguments);\n                      };\n                    }());\n                  } catch (error) {\n                    log.error(\"Wallet connect v1 adapter error while connecting\", error); // ready again to be connected\n\n                    _this2.status = ADAPTER_STATUS.READY;\n                    _this2.rehydrated = true;\n\n                    _this2.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    reject(error instanceof Web3AuthError ? error : WalletLoginError.connectionError(\"Failed to login with wallet connect: \".concat((error === null || error === void 0 ? void 0 : error.message) || \"\")));\n                  }\n                }));\n\n              case 14:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"setAdapterSettings\",\n    value: function setAdapterSettings(options) {\n      if (this.status === ADAPTER_STATUS.READY) return;\n\n      if (options !== null && options !== void 0 && options.sessionTime) {\n        this.sessionTime = options.sessionTime;\n      }\n\n      if (options !== null && options !== void 0 && options.clientId) {\n        this.clientId = options.clientId;\n      }\n    }\n  }, {\n    key: \"getUserInfo\",\n    value: function () {\n      var _getUserInfo = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (this.connected) {\n                  _context5.next = 2;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet, Please login/connect first\");\n\n              case 2:\n                return _context5.abrupt(\"return\", {});\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function getUserInfo() {\n        return _getUserInfo.apply(this, arguments);\n      }\n\n      return getUserInfo;\n    }()\n  }, {\n    key: \"disconnect\",\n    value: function () {\n      var _disconnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var options,\n            cleanup,\n            _args6 = arguments;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                options = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {\n                  cleanup: false\n                };\n                cleanup = options.cleanup;\n\n                if (!(!this.connector || !this.connected)) {\n                  _context6.next = 4;\n                  break;\n                }\n\n                throw WalletLoginError.notConnectedError(\"Not connected with wallet\");\n\n              case 4:\n                _context6.next = 6;\n                return _get(_getPrototypeOf(WalletConnectV1Adapter.prototype), \"disconnect\", this).call(this);\n\n              case 6:\n                _context6.next = 8;\n                return this.connector.killSession();\n\n              case 8:\n                this.rehydrated = false;\n\n                if (cleanup) {\n                  this.connector = null;\n                  this.status = ADAPTER_STATUS.NOT_READY;\n                  this.wcProvider = null;\n                } else {\n                  // ready to connect again\n                  this.status = ADAPTER_STATUS.READY;\n                }\n\n                this.emit(ADAPTER_EVENTS.DISCONNECTED);\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function disconnect() {\n        return _disconnect.apply(this, arguments);\n      }\n\n      return disconnect;\n    }()\n  }, {\n    key: \"addChain\",\n    value: function () {\n      var _addChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(chainConfig) {\n        var _this$adapterOptions$3, networkSwitch;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n\n                if (this.wcProvider) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                networkSwitch = (_this$adapterOptions$3 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$3 === void 0 ? void 0 : _this$adapterOptions$3.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                _context7.next = 7;\n                return networkSwitch.addNetwork({\n                  chainConfig: chainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 7:\n                _context7.next = 9;\n                return this.wcProvider.addChain(chainConfig);\n\n              case 9:\n                _context7.next = 14;\n                break;\n\n              case 11:\n                _context7.prev = 11;\n                _context7.t0 = _context7[\"catch\"](0);\n                log.error(_context7.t0);\n\n              case 14:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 11]]);\n      }));\n\n      function addChain(_x3) {\n        return _addChain.apply(this, arguments);\n      }\n\n      return addChain;\n    }()\n  }, {\n    key: \"switchChain\",\n    value: function () {\n      var _switchChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(connectedChainConfig, chainConfig) {\n        var _this$adapterOptions$4;\n\n        var networkSwitch;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (this.wcProvider) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                networkSwitch = (_this$adapterOptions$4 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$4 === void 0 ? void 0 : _this$adapterOptions$4.networkSwitchModal;\n\n                if (!networkSwitch) {\n                  _context8.next = 6;\n                  break;\n                }\n\n                _context8.next = 6;\n                return networkSwitch.switchNetwork({\n                  currentChainConfig: chainConfig,\n                  newChainConfig: connectedChainConfig,\n                  appOrigin: window.location.hostname\n                });\n\n              case 6:\n                _context8.next = 8;\n                return this.wcProvider.switchChain({\n                  chainId: chainConfig.chainId,\n                  lookup: false,\n                  addChain: false\n                });\n\n              case 8:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function switchChain(_x4, _x5) {\n        return _switchChain.apply(this, arguments);\n      }\n\n      return switchChain;\n    }()\n  }, {\n    key: \"createNewSession\",\n    value: function () {\n      var _createNewSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n        var _this$adapterOptions,\n            _this$adapterOptions$5,\n            _this3 = this;\n\n        var opts,\n            _this$chainConfig,\n            _args10 = arguments;\n\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                opts = _args10.length > 0 && _args10[0] !== undefined ? _args10[0] : {\n                  forceNewSession: false\n                };\n\n                if (this.connector) {\n                  _context10.next = 3;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 3:\n                if (!(opts.forceNewSession && this.connector.pending)) {\n                  _context10.next = 6;\n                  break;\n                }\n\n                _context10.next = 6;\n                return this.connector.killSession();\n\n              case 6:\n                if (!((_this$adapterOptions = this.adapterOptions) !== null && _this$adapterOptions !== void 0 && (_this$adapterOptions$5 = _this$adapterOptions.adapterSettings) !== null && _this$adapterOptions$5 !== void 0 && _this$adapterOptions$5.qrcodeModal)) {\n                  _context10.next = 10;\n                  break;\n                }\n\n                _context10.next = 9;\n                return this.connector.createSession({\n                  chainId: parseInt(((_this$chainConfig = this.chainConfig) === null || _this$chainConfig === void 0 ? void 0 : _this$chainConfig.chainId) || \"0x1\", 16)\n                });\n\n              case 9:\n                return _context10.abrupt(\"return\");\n\n              case 10:\n                return _context10.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  var _this3$chainConfig;\n\n                  if (!_this3.connector) return reject(WalletInitializationError.notReady(\"Wallet adapter is not ready yet\"));\n                  log.debug(\"creating new session for web3auth wallet connect\");\n\n                  _this3.connector.on(\"display_uri\", /*#__PURE__*/function () {\n                    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(err, payload) {\n                      var _this3$connector;\n\n                      var uri;\n                      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                        while (1) {\n                          switch (_context9.prev = _context9.next) {\n                            case 0:\n                              if (!err) {\n                                _context9.next = 3;\n                                break;\n                              }\n\n                              _this3.emit(ADAPTER_EVENTS.ERRORED, WalletLoginError.connectionError(\"Failed to display wallet connect qr code\"));\n\n                              return _context9.abrupt(\"return\", reject(err));\n\n                            case 3:\n                              uri = payload.params[0];\n\n                              _this3.updateAdapterData({\n                                uri: uri,\n                                extensionAdapters: WALLET_CONNECT_EXTENSION_ADAPTERS\n                              });\n\n                              (_this3$connector = _this3.connector) === null || _this3$connector === void 0 ? void 0 : _this3$connector.off(\"display_uri\");\n                              return _context9.abrupt(\"return\", resolve());\n\n                            case 7:\n                            case \"end\":\n                              return _context9.stop();\n                          }\n                        }\n                      }, _callee9);\n                    }));\n\n                    return function (_x6, _x7) {\n                      return _ref3.apply(this, arguments);\n                    };\n                  }());\n\n                  _this3.connector.createSession({\n                    chainId: parseInt(((_this3$chainConfig = _this3.chainConfig) === null || _this3$chainConfig === void 0 ? void 0 : _this3$chainConfig.chainId) || \"0x1\", 16)\n                  }).catch(function (error) {\n                    log.error(\"error while creating new wallet connect session\", error);\n\n                    _this3.emit(ADAPTER_EVENTS.ERRORED, error);\n\n                    return reject(error);\n                  });\n                }));\n\n              case 11:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function createNewSession() {\n        return _createNewSession.apply(this, arguments);\n      }\n\n      return createNewSession;\n    }()\n  }, {\n    key: \"onConnectHandler\",\n    value: function () {\n      var _onConnectHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(params) {\n        var chainId, _this$adapterOptions$6, _this$adapterOptions2, _this$adapterOptions3, connectedChainConfig, isCustomUi;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!(!this.connector || !this.wcProvider)) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw WalletInitializationError.notReady(\"Wallet adapter is not ready yet\");\n\n              case 2:\n                if (this.chainConfig) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                throw WalletInitializationError.invalidParams(\"Chain config is not set\");\n\n              case 4:\n                chainId = params.chainId;\n                log.debug(\"connected chainId in hex\");\n\n                if (!(chainId !== parseInt(this.chainConfig.chainId, 16))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                connectedChainConfig = getChainConfig(CHAIN_NAMESPACES.EIP155, chainId) || {\n                  chainId: \"0x\".concat(chainId.toString(16)),\n                  displayName: \"Unknown Network\"\n                };\n                isCustomUi = (_this$adapterOptions$6 = this.adapterOptions.adapterSettings) === null || _this$adapterOptions$6 === void 0 ? void 0 : _this$adapterOptions$6.qrcodeModal; // skipping network is not allowed in default ui. We are use network switching modal for default ui.\n\n                if (!(!isCustomUi || isCustomUi && !((_this$adapterOptions2 = this.adapterOptions) !== null && _this$adapterOptions2 !== void 0 && (_this$adapterOptions3 = _this$adapterOptions2.adapterSettings) !== null && _this$adapterOptions3 !== void 0 && _this$adapterOptions3.skipNetworkSwitching))) {\n                  _context11.next = 27;\n                  break;\n                }\n\n                _context11.prev = 10;\n                _context11.next = 13;\n                return this.addChain(this.chainConfig);\n\n              case 13:\n                _context11.next = 15;\n                return this.switchChain(connectedChainConfig, this.chainConfig);\n\n              case 15:\n                this.connector = this.getWalletConnectInstance();\n                _context11.next = 27;\n                break;\n\n              case 18:\n                _context11.prev = 18;\n                _context11.t0 = _context11[\"catch\"](10);\n                log.error(\"error while chain switching\", _context11.t0); // we need to create a new session since old session is already used and\n                // user needs to login again with correct chain with new qr code.\n\n                _context11.next = 23;\n                return this.createNewSession({\n                  forceNewSession: true\n                });\n\n              case 23:\n                this.emit(ADAPTER_EVENTS.ERRORED, WalletInitializationError.fromCode(5000, \"Not connected to correct network. Expected: \".concat(this.chainConfig.displayName, \", Current: \").concat((connectedChainConfig === null || connectedChainConfig === void 0 ? void 0 : connectedChainConfig.displayName) || chainId, \", Please switch to correct network from wallet\")));\n                this.status = ADAPTER_STATUS.READY;\n                this.rehydrated = true;\n                return _context11.abrupt(\"return\");\n\n              case 27:\n                _context11.next = 29;\n                return this.wcProvider.setupProvider(this.connector);\n\n              case 29:\n                this.subscribeEvents(this.connector);\n                this.status = ADAPTER_STATUS.CONNECTED;\n                this.emit(ADAPTER_EVENTS.CONNECTED, {\n                  adapter: WALLET_ADAPTERS.WALLET_CONNECT_V1,\n                  reconnected: this.rehydrated\n                });\n\n              case 32:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[10, 18]]);\n      }));\n\n      function onConnectHandler(_x8) {\n        return _onConnectHandler.apply(this, arguments);\n      }\n\n      return onConnectHandler;\n    }()\n  }, {\n    key: \"subscribeEvents\",\n    value: function subscribeEvents(connector) {\n      var _this4 = this;\n\n      connector.on(\"session_update\", /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(error) {\n          return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  if (error) {\n                    _this4.emit(ADAPTER_EVENTS.ERRORED, error);\n                  }\n\n                case 1:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12);\n        }));\n\n        return function (_x9) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"getWalletConnectInstance\",\n    value: function getWalletConnectInstance() {\n      var walletConnectOptions = this.adapterOptions.adapterSettings || {};\n      walletConnectOptions.bridge = walletConnectOptions.bridge || \"https://bridge.walletconnect.org\"; // Create a connector\n\n      return new WalletConnect(walletConnectOptions);\n    }\n  }]);\n\n  return WalletConnectV1Adapter;\n}(BaseEvmAdapter);\n\nexport { WalletConnectV1Adapter };\n//# sourceMappingURL=walletConnectV1Adapter.esm.js.map\n"]},"metadata":{},"sourceType":"module"}