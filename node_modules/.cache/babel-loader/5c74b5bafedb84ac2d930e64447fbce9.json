{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { CHAIN_NAMESPACES, SOLANA_ADAPTERS, EVM_ADAPTERS, WALLET_ADAPTERS, getChainConfig, ADAPTER_CATEGORY, log, ADAPTER_STATUS, ADAPTER_EVENTS } from '@web3auth/base';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { Web3AuthCore } from '@web3auth/core';\nimport LoginModal, { getAdapterSocialLogins, OPENLOGIN_PROVIDERS, LOGIN_MODAL_EVENTS } from '@web3auth/ui';\n\nvar _adapters, _adapters2;\n\nvar defaultSolanaDappModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.SOLANA,\n  adapters: (_adapters = {}, _defineProperty(_adapters, SOLANA_ADAPTERS.TORUS_SOLANA, {\n    label: \"Torus Wallet\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters, SOLANA_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters, SOLANA_ADAPTERS.PHANTOM, {\n    label: \"Phantom\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _adapters)\n};\nvar defaultEvmDappModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.EIP155,\n  adapters: (_adapters2 = {}, _defineProperty(_adapters2, EVM_ADAPTERS.TORUS_EVM, {\n    label: \"Torus Wallet\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.METAMASK, {\n    label: \"MetaMask\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.WALLET_CONNECT_V1, {\n    label: \"Wallet Connect\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _adapters2)\n};\nvar defaultSolanaWalletModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.SOLANA,\n  adapters: _defineProperty({}, SOLANA_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\nvar defaultEvmWalletModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.EIP155,\n  adapters: _defineProperty({}, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\nvar defaultOtherModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.OTHER,\n  adapters: _defineProperty({}, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar getDefaultAdapterModule = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var name, customChainConfig, clientId, finalChainConfig, _yield$import, TorusWalletAdapter, adapter, _yield$import2, SolanaWalletAdapter, _adapter, _yield$import3, MetamaskAdapter, _adapter2, _yield$import4, PhantomAdapter, _adapter3, _yield$import5, WalletConnectV1Adapter, _adapter4, _yield$import6, OpenloginAdapter, getOpenloginDefaultOptions, defaultOptions, _adapter5;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            name = params.name, customChainConfig = params.customChainConfig, clientId = params.clientId;\n\n            if (Object.values(CHAIN_NAMESPACES).includes(customChainConfig.chainNamespace)) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Invalid chainNamespace: \".concat(customChainConfig.chainNamespace));\n\n          case 3:\n            finalChainConfig = _objectSpread$1(_objectSpread$1({}, getChainConfig(customChainConfig.chainNamespace, customChainConfig === null || customChainConfig === void 0 ? void 0 : customChainConfig.chainId)), customChainConfig || {});\n\n            if (!(name === WALLET_ADAPTERS.TORUS_EVM)) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.next = 7;\n            return import('@web3auth/torus-evm-adapter');\n\n          case 7:\n            _yield$import = _context.sent;\n            TorusWalletAdapter = _yield$import.TorusWalletAdapter;\n            adapter = new TorusWalletAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", adapter);\n\n          case 13:\n            if (!(name === WALLET_ADAPTERS.TORUS_SOLANA)) {\n              _context.next = 22;\n              break;\n            }\n\n            _context.next = 16;\n            return import('@web3auth/torus-solana-adapter');\n\n          case 16:\n            _yield$import2 = _context.sent;\n            SolanaWalletAdapter = _yield$import2.SolanaWalletAdapter;\n            _adapter = new SolanaWalletAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter);\n\n          case 22:\n            if (!(name === WALLET_ADAPTERS.METAMASK)) {\n              _context.next = 31;\n              break;\n            }\n\n            _context.next = 25;\n            return import('@web3auth/metamask-adapter');\n\n          case 25:\n            _yield$import3 = _context.sent;\n            MetamaskAdapter = _yield$import3.MetamaskAdapter;\n            _adapter2 = new MetamaskAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter2);\n\n          case 31:\n            if (!(name === WALLET_ADAPTERS.PHANTOM)) {\n              _context.next = 40;\n              break;\n            }\n\n            _context.next = 34;\n            return import('@web3auth/phantom-adapter');\n\n          case 34:\n            _yield$import4 = _context.sent;\n            PhantomAdapter = _yield$import4.PhantomAdapter;\n            _adapter3 = new PhantomAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter3);\n\n          case 40:\n            if (!(name === WALLET_ADAPTERS.WALLET_CONNECT_V1)) {\n              _context.next = 49;\n              break;\n            }\n\n            _context.next = 43;\n            return import('@web3auth/wallet-connect-v1-adapter');\n\n          case 43:\n            _yield$import5 = _context.sent;\n            WalletConnectV1Adapter = _yield$import5.WalletConnectV1Adapter;\n            _adapter4 = new WalletConnectV1Adapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter4);\n\n          case 49:\n            if (!(name === WALLET_ADAPTERS.OPENLOGIN)) {\n              _context.next = 58;\n              break;\n            }\n\n            _context.next = 52;\n            return import('@web3auth/openlogin-adapter');\n\n          case 52:\n            _yield$import6 = _context.sent;\n            OpenloginAdapter = _yield$import6.OpenloginAdapter;\n            getOpenloginDefaultOptions = _yield$import6.getOpenloginDefaultOptions;\n            defaultOptions = getOpenloginDefaultOptions(customChainConfig.chainNamespace, customChainConfig === null || customChainConfig === void 0 ? void 0 : customChainConfig.chainId);\n            _adapter5 = new OpenloginAdapter(_objectSpread$1(_objectSpread$1({}, defaultOptions), {}, {\n              chainConfig: _objectSpread$1(_objectSpread$1({}, defaultOptions.chainConfig || {}), finalChainConfig),\n              adapterSettings: _objectSpread$1(_objectSpread$1({}, defaultOptions.adapterSettings), {}, {\n                clientId: clientId\n              })\n            }));\n            return _context.abrupt(\"return\", _adapter5);\n\n          case 58:\n            throw new Error(\"Invalid wallet adapter name\");\n\n          case 59:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getDefaultAdapterModule(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar Web3Auth = /*#__PURE__*/function (_Web3AuthCore) {\n  _inherits(Web3Auth, _Web3AuthCore);\n\n  var _super = _createSuper(Web3Auth);\n\n  function Web3Auth(options) {\n    var _this$options$uiConfi, _this$options$uiConfi2;\n\n    var _this;\n\n    _classCallCheck(this, Web3Auth);\n\n    _this = _super.call(this, options);\n\n    _defineProperty(_assertThisInitialized(_this), \"loginModal\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"options\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"modalConfig\", defaultEvmDappModalConfig);\n\n    _this.options = _objectSpread({}, options);\n    var providedChainConfig = _this.options.chainConfig;\n\n    if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n      if (options.authMode === \"WALLET\") {\n        // default config for solana wallet modal\n        _this.modalConfig = defaultSolanaWalletModalConfig;\n      } else {\n        // default config for solana dapp modal\n        _this.modalConfig = defaultSolanaDappModalConfig;\n      }\n    } else if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.EIP155) {\n      if (options.authMode === \"WALLET\") {\n        // default config for evm wallet modal\n        _this.modalConfig = defaultEvmWalletModalConfig;\n      } else {\n        // default config for evm dapp modal\n        _this.modalConfig = defaultEvmDappModalConfig;\n      }\n    } else if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.OTHER) {\n      _this.modalConfig = defaultOtherModalConfig;\n    } else {\n      throw new Error(\"Invalid chainNamespace provided: \".concat(providedChainConfig.chainNamespace));\n    }\n\n    _this.loginModal = new LoginModal({\n      theme: (_this$options$uiConfi = _this.options.uiConfig) === null || _this$options$uiConfi === void 0 ? void 0 : _this$options$uiConfi.theme,\n      appLogo: ((_this$options$uiConfi2 = _this.options.uiConfig) === null || _this$options$uiConfi2 === void 0 ? void 0 : _this$options$uiConfi2.appLogo) || \"\",\n      version: \"\",\n      adapterListener: _assertThisInitialized(_this),\n      displayErrorsOnModal: _this.options.displayErrorsOnModal\n    });\n\n    _this.subscribeToLoginModalEvents();\n\n    return _this;\n  }\n\n  _createClass(Web3Auth, [{\n    key: \"initModal\",\n    value: function () {\n      var _initModal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(params) {\n        var _this2 = this;\n\n        var providedChainConfig, allAdapters, adapterConfigurationPromises, adapterNames, hasInAppWallets, initPromises, hasExternalWallets;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _get(_getPrototypeOf(Web3Auth.prototype), \"checkInitRequirements\", this).call(this);\n\n                _context3.next = 3;\n                return this.loginModal.initModal();\n\n              case 3:\n                providedChainConfig = this.options.chainConfig; // merge default adapters with the custom configured adapters.\n\n                allAdapters = _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(this.modalConfig.adapters || {})), _toConsumableArray(Object.keys(this.walletAdapters)))));\n                adapterConfigurationPromises = allAdapters.map( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(adapterName) {\n                    var _this2$modalConfig$ad, _params$modalConfig, _this2$modalConfig$ad2, _this2$modalConfig$ad3;\n\n                    var adapterConfig, adapter, ad, _this2$modalConfig$ad4, _this2$coreOptions$ch, chainConfig;\n\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            // start with the default config of adapter.\n                            adapterConfig = ((_this2$modalConfig$ad = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad === void 0 ? void 0 : _this2$modalConfig$ad[adapterName]) || {\n                              label: adapterName,\n                              showOnModal: true,\n                              showOnMobile: true,\n                              showOnDesktop: true\n                            }; // override the default config of adapter if some config is being provided by the user.\n\n                            if (params !== null && params !== void 0 && (_params$modalConfig = params.modalConfig) !== null && _params$modalConfig !== void 0 && _params$modalConfig[adapterName]) {\n                              adapterConfig = _objectSpread(_objectSpread({}, adapterConfig), params.modalConfig[adapterName]);\n                            }\n\n                            _this2.modalConfig.adapters[adapterName] = adapterConfig; // check if adapter is configured/added by user and exist in walletAdapters map.\n\n                            adapter = _this2.walletAdapters[adapterName];\n                            log.debug(\"adapter config\", adapterName, (_this2$modalConfig$ad2 = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad2 === void 0 ? void 0 : _this2$modalConfig$ad2[adapterName].showOnModal, adapter); // if adapter is not custom configured then check if it is available in default adapters.\n                            // and if adapter is not hidden by user\n\n                            if (!(!adapter && (_this2$modalConfig$ad3 = _this2.modalConfig.adapters) !== null && _this2$modalConfig$ad3 !== void 0 && _this2$modalConfig$ad3[adapterName].showOnModal)) {\n                              _context.next = 13;\n                              break;\n                            }\n\n                            _context.next = 8;\n                            return getDefaultAdapterModule({\n                              name: adapterName,\n                              customChainConfig: _this2.options.chainConfig,\n                              clientId: _this2.options.clientId\n                            });\n\n                          case 8:\n                            ad = _context.sent;\n                            _this2.walletAdapters[adapterName] = ad;\n                            return _context.abrupt(\"return\", adapterName);\n\n                          case 13:\n                            if (!((adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.IN_APP || (adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.EXTERNAL || adapterName === _this2.cachedAdapter)) {\n                              _context.next = 19;\n                              break;\n                            }\n\n                            if ((_this2$modalConfig$ad4 = _this2.modalConfig.adapters) !== null && _this2$modalConfig$ad4 !== void 0 && _this2$modalConfig$ad4[adapterName].showOnModal) {\n                              _context.next = 16;\n                              break;\n                            }\n\n                            return _context.abrupt(\"return\");\n\n                          case 16:\n                            // add client id to adapter, same web3auth client id can be used in adapter.\n                            // this id is being overridden if user is also passing client id in adapter's constructor.\n                            _this2.walletAdapters[adapterName].setAdapterSettings({\n                              clientId: _this2.options.clientId,\n                              sessionTime: _this2.options.sessionTime\n                            }); // if adapter doesn't have any chainConfig then we will set the chainConfig based of passed chainNamespace\n                            // and chainNamespace.\n\n\n                            if (!adapter.chainConfigProxy) {\n                              chainConfig = _objectSpread(_objectSpread({}, getChainConfig(providedChainConfig.chainNamespace, (_this2$coreOptions$ch = _this2.coreOptions.chainConfig) === null || _this2$coreOptions$ch === void 0 ? void 0 : _this2$coreOptions$ch.chainId)), _this2.coreOptions.chainConfig);\n\n                              _this2.walletAdapters[adapterName].setChainConfig(chainConfig);\n                            }\n\n                            return _context.abrupt(\"return\", adapterName);\n\n                          case 19:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context3.next = 8;\n                return Promise.all(adapterConfigurationPromises);\n\n              case 8:\n                adapterNames = _context3.sent;\n                hasInAppWallets = Object.values(this.walletAdapters).some(function (adapter) {\n                  var _this2$modalConfig$ad5;\n\n                  if (adapter.type !== ADAPTER_CATEGORY.IN_APP) return false;\n                  if (_this2.modalConfig.adapters[adapter.name].showOnModal !== true) return false;\n                  if (!_this2.modalConfig.adapters[adapter.name].loginMethods) return true;\n                  var mergedLoginMethods = getAdapterSocialLogins(adapter.name, _this2.walletAdapters[adapter.name], (_this2$modalConfig$ad5 = _this2.modalConfig.adapters[adapter.name]) === null || _this2$modalConfig$ad5 === void 0 ? void 0 : _this2$modalConfig$ad5.loginMethods);\n                  if (Object.values(mergedLoginMethods).some(function (method) {\n                    return method.showOnModal;\n                  })) return true;\n                  return false;\n                });\n                log.debug(hasInAppWallets, this.walletAdapters, \"hasInAppWallets\"); // Now, initialize the adapters.\n\n                initPromises = adapterNames.map( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(adapterName) {\n                    var adapter;\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (adapterName) {\n                              _context2.next = 2;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\");\n\n                          case 2:\n                            _context2.prev = 2;\n                            adapter = _this2.walletAdapters[adapterName]; // only initialize a external adapter here if it is a cached adapter.\n\n                            if (!(_this2.cachedAdapter !== adapterName && adapter.type === ADAPTER_CATEGORY.EXTERNAL)) {\n                              _context2.next = 6;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\");\n\n                          case 6:\n                            // in-app wallets or cached wallet (being connected or already connected) are initialized first.\n                            // if adapter is configured thn only initialize in app or cached adapter.\n                            // external wallets are initialized on INIT_EXTERNAL_WALLET event.\n                            _this2.subscribeToAdapterEvents(adapter);\n\n                            if (!(adapter.status === ADAPTER_STATUS.NOT_READY)) {\n                              _context2.next = 10;\n                              break;\n                            }\n\n                            _context2.next = 10;\n                            return adapter.init({\n                              autoConnect: _this2.cachedAdapter === adapterName\n                            });\n\n                          case 10:\n                            // note: not adding cachedWallet to modal if it is external wallet.\n                            // adding it later if no in-app wallets are available.\n                            if (adapter.type === ADAPTER_CATEGORY.IN_APP) {\n                              _this2.initializeInAppWallet(adapterName);\n                            }\n\n                            _context2.next = 16;\n                            break;\n\n                          case 13:\n                            _context2.prev = 13;\n                            _context2.t0 = _context2[\"catch\"](2);\n                            log.error(_context2.t0, \"error while initializing adapter\");\n\n                          case 16:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[2, 13]]);\n                  }));\n\n                  return function (_x3) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                this.status = ADAPTER_STATUS.READY;\n                _context3.next = 15;\n                return Promise.all(initPromises);\n\n              case 15:\n                hasExternalWallets = allAdapters.some(function (adapterName) {\n                  var _this2$walletAdapters, _this2$modalConfig$ad6;\n\n                  return ((_this2$walletAdapters = _this2.walletAdapters[adapterName]) === null || _this2$walletAdapters === void 0 ? void 0 : _this2$walletAdapters.type) === ADAPTER_CATEGORY.EXTERNAL && ((_this2$modalConfig$ad6 = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad6 === void 0 ? void 0 : _this2$modalConfig$ad6[adapterName].showOnModal);\n                });\n\n                if (hasExternalWallets) {\n                  this.loginModal.initExternalWalletContainer();\n                } // variable to check if we have any in app wallets\n                // currently all default in app and external wallets can be hidden or shown based on config.\n\n\n                if (!(!hasInAppWallets && hasExternalWallets)) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                _context3.next = 20;\n                return this.initExternalWalletAdapters(false, {\n                  showExternalWalletsOnly: true\n                });\n\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function initModal(_x) {\n        return _initModal.apply(this, arguments);\n      }\n\n      return initModal;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!this.provider) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", this.provider);\n\n              case 2:\n                this.loginModal.open();\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this3.once(ADAPTER_EVENTS.CONNECTED, function () {\n                    return resolve(_this3.provider);\n                  });\n\n                  _this3.once(ADAPTER_EVENTS.ERRORED, function (err) {\n                    return reject(err);\n                  });\n                }));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"initExternalWalletAdapters\",\n    value: function () {\n      var _initExternalWalletAdapters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(externalWalletsInitialized, options) {\n        var _this4 = this;\n\n        var adaptersConfig, adaptersData, adapterPromises, adapterInitResults, finalAdaptersConfig;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!externalWalletsInitialized) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 2:\n                adaptersConfig = {};\n                adaptersData = {};\n                adapterPromises = Object.keys(this.walletAdapters).map( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(adapterName) {\n                    var adapter;\n                    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.prev = 0;\n                            adapter = _this4.walletAdapters[adapterName];\n\n                            if (!((adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.EXTERNAL)) {\n                              _context5.next = 11;\n                              break;\n                            }\n\n                            log.debug(\"init external wallet\", _this4.cachedAdapter, adapterName);\n\n                            _this4.subscribeToAdapterEvents(adapter); // we are not initializing cached adapter here as it is already being initialized in initModal before.\n\n\n                            if (!(_this4.cachedAdapter === adapterName)) {\n                              _context5.next = 7;\n                              break;\n                            }\n\n                            return _context5.abrupt(\"return\");\n\n                          case 7:\n                            if (!(adapter.status === ADAPTER_STATUS.NOT_READY)) {\n                              _context5.next = 11;\n                              break;\n                            }\n\n                            _context5.next = 10;\n                            return Promise.race([adapter.init({\n                              autoConnect: _this4.cachedAdapter === adapterName\n                            }).then(function () {\n                              adaptersConfig[adapterName] = _this4.modalConfig.adapters[adapterName];\n                              adaptersData[adapterName] = adapter.adapterData || {};\n                              return adapterName;\n                            }), new Promise(function (resolve) {\n                              setTimeout(function () {\n                                return resolve(null);\n                              }, 5000);\n                            })]);\n\n                          case 10:\n                            return _context5.abrupt(\"return\", _context5.sent);\n\n                          case 11:\n                            _context5.next = 16;\n                            break;\n\n                          case 13:\n                            _context5.prev = 13;\n                            _context5.t0 = _context5[\"catch\"](0);\n                            log.error(_context5.t0, \"error while initializing adapter\");\n\n                          case 16:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5, null, [[0, 13]]);\n                  }));\n\n                  return function (_x6) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                _context6.next = 7;\n                return Promise.all(adapterPromises);\n\n              case 7:\n                adapterInitResults = _context6.sent;\n                finalAdaptersConfig = {};\n                adapterInitResults.forEach(function (result) {\n                  if (result) {\n                    finalAdaptersConfig[result] = adaptersConfig[result];\n                  }\n                });\n                this.loginModal.addWalletLogins(finalAdaptersConfig, {\n                  showExternalWalletsOnly: !!(options !== null && options !== void 0 && options.showExternalWalletsOnly)\n                });\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function initExternalWalletAdapters(_x4, _x5) {\n        return _initExternalWalletAdapters.apply(this, arguments);\n      }\n\n      return initExternalWalletAdapters;\n    }()\n  }, {\n    key: \"initializeInAppWallet\",\n    value: function initializeInAppWallet(adapterName) {\n      log.info(\"adapterInitResults\", adapterName);\n\n      if (this.walletAdapters[adapterName].type === ADAPTER_CATEGORY.IN_APP) {\n        var _this$modalConfig$ada, _this$options$uiConfi3;\n\n        this.loginModal.addSocialLogins(adapterName, getAdapterSocialLogins(adapterName, this.walletAdapters[adapterName], (_this$modalConfig$ada = this.modalConfig.adapters[adapterName]) === null || _this$modalConfig$ada === void 0 ? void 0 : _this$modalConfig$ada.loginMethods), ((_this$options$uiConfi3 = this.options.uiConfig) === null || _this$options$uiConfi3 === void 0 ? void 0 : _this$options$uiConfi3.loginMethodsOrder) || OPENLOGIN_PROVIDERS);\n      }\n    }\n  }, {\n    key: \"subscribeToLoginModalEvents\",\n    value: function subscribeToLoginModalEvents() {\n      var _this5 = this;\n\n      this.loginModal.on(LOGIN_MODAL_EVENTS.LOGIN, /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(params) {\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  _context7.prev = 0;\n                  _context7.next = 3;\n                  return _this5.connectTo(params.adapter, params.loginParams);\n\n                case 3:\n                  _context7.next = 8;\n                  break;\n\n                case 5:\n                  _context7.prev = 5;\n                  _context7.t0 = _context7[\"catch\"](0);\n                  log.error(\"Error while connecting to adapter: \".concat(params.adapter), _context7.t0);\n\n                case 8:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7, null, [[0, 5]]);\n        }));\n\n        return function (_x7) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n      this.loginModal.on(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS, /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(params) {\n          return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  _context8.next = 2;\n                  return _this5.initExternalWalletAdapters(params.externalWalletsInitialized);\n\n                case 2:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        return function (_x8) {\n          return _ref5.apply(this, arguments);\n        };\n      }());\n      this.loginModal.on(LOGIN_MODAL_EVENTS.DISCONNECT, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return _this5.logout();\n\n              case 3:\n                _context9.next = 8;\n                break;\n\n              case 5:\n                _context9.prev = 5;\n                _context9.t0 = _context9[\"catch\"](0);\n                log.error(\"Error while disconnecting\", _context9.t0);\n\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 5]]);\n      })));\n      this.loginModal.on(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY, /*#__PURE__*/function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(visibility) {\n          var _this5$walletAdapters;\n\n          var walletConnectStatus;\n          return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  log.debug(\"is login modal visible\", visibility);\n\n                  _this5.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY, visibility);\n\n                  walletConnectStatus = (_this5$walletAdapters = _this5.walletAdapters[WALLET_ADAPTERS.WALLET_CONNECT_V1]) === null || _this5$walletAdapters === void 0 ? void 0 : _this5$walletAdapters.status;\n\n                  if (visibility && walletConnectStatus === ADAPTER_STATUS.READY) {\n                    // refreshing session for wallet connect whenever modal is opened.\n                    try {\n                      _this5.walletAdapters[WALLET_ADAPTERS.WALLET_CONNECT_V1].connect();\n                    } catch (error) {\n                      log.error(\"Error while disconnecting to wallet connect in core\", error);\n                    }\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10);\n        }));\n\n        return function (_x9) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n\n  return Web3Auth;\n}(Web3AuthCore);\n\nexport { Web3Auth, defaultEvmDappModalConfig, defaultEvmWalletModalConfig, defaultOtherModalConfig, defaultSolanaDappModalConfig, defaultSolanaWalletModalConfig };","map":{"version":3,"sources":["../src/config.ts","../src/default.ts","../src/modalManager.ts"],"names":["defaultSolanaDappModalConfig","chainNamespace","CHAIN_NAMESPACES","adapters","SOLANA_ADAPTERS","label","showOnModal","showOnMobile","showOnDesktop","defaultEvmDappModalConfig","EVM_ADAPTERS","defaultSolanaWalletModalConfig","defaultEvmWalletModalConfig","defaultOtherModalConfig","getDefaultAdapterModule","name","customChainConfig","clientId","params","Object","finalChainConfig","getChainConfig","WALLET_ADAPTERS","TorusWalletAdapter","adapter","chainConfig","SolanaWalletAdapter","MetamaskAdapter","PhantomAdapter","WalletConnectV1Adapter","OpenloginAdapter","getOpenloginDefaultOptions","defaultOptions","adapterSettings","Web3Auth","options","providedChainConfig","modalConfig","theme","appLogo","version","adapterListener","displayErrorsOnModal","allAdapters","adapterConfigurationPromises","adapterConfig","log","ad","ADAPTER_CATEGORY","adapterName","sessionTime","adapterNames","Promise","hasInAppWallets","mergedLoginMethods","getAdapterSocialLogins","method","initPromises","ADAPTER_STATUS","autoConnect","hasExternalWallets","type","showExternalWalletsOnly","ADAPTER_EVENTS","resolve","reject","adaptersConfig","adaptersData","adapterPromises","setTimeout","adapterInitResults","finalAdaptersConfig","loginMethodsOrder","LOGIN_MODAL_EVENTS","walletConnectStatus","visibility"],"mappings":"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","sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport { CHAIN_NAMESPACES, SOLANA_ADAPTERS, EVM_ADAPTERS, WALLET_ADAPTERS, getChainConfig, ADAPTER_CATEGORY, log, ADAPTER_STATUS, ADAPTER_EVENTS } from '@web3auth/base';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _classCallCheck from '@babel/runtime/helpers/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport _get from '@babel/runtime/helpers/get';\nimport _inherits from '@babel/runtime/helpers/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/getPrototypeOf';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport { Web3AuthCore } from '@web3auth/core';\nimport LoginModal, { getAdapterSocialLogins, OPENLOGIN_PROVIDERS, LOGIN_MODAL_EVENTS } from '@web3auth/ui';\n\nvar _adapters, _adapters2;\nvar defaultSolanaDappModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.SOLANA,\n  adapters: (_adapters = {}, _defineProperty(_adapters, SOLANA_ADAPTERS.TORUS_SOLANA, {\n    label: \"Torus Wallet\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters, SOLANA_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters, SOLANA_ADAPTERS.PHANTOM, {\n    label: \"Phantom\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _adapters)\n};\nvar defaultEvmDappModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.EIP155,\n  adapters: (_adapters2 = {}, _defineProperty(_adapters2, EVM_ADAPTERS.TORUS_EVM, {\n    label: \"Torus Wallet\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.METAMASK, {\n    label: \"MetaMask\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _defineProperty(_adapters2, EVM_ADAPTERS.WALLET_CONNECT_V1, {\n    label: \"Wallet Connect\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  }), _adapters2)\n};\nvar defaultSolanaWalletModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.SOLANA,\n  adapters: _defineProperty({}, SOLANA_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\nvar defaultEvmWalletModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.EIP155,\n  adapters: _defineProperty({}, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\nvar defaultOtherModalConfig = {\n  chainNamespace: CHAIN_NAMESPACES.OTHER,\n  adapters: _defineProperty({}, EVM_ADAPTERS.OPENLOGIN, {\n    label: \"OpenLogin\",\n    showOnModal: true,\n    showOnMobile: true,\n    showOnDesktop: true\n  })\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys$1(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar getDefaultAdapterModule = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var name, customChainConfig, clientId, finalChainConfig, _yield$import, TorusWalletAdapter, adapter, _yield$import2, SolanaWalletAdapter, _adapter, _yield$import3, MetamaskAdapter, _adapter2, _yield$import4, PhantomAdapter, _adapter3, _yield$import5, WalletConnectV1Adapter, _adapter4, _yield$import6, OpenloginAdapter, getOpenloginDefaultOptions, defaultOptions, _adapter5;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            name = params.name, customChainConfig = params.customChainConfig, clientId = params.clientId;\n\n            if (Object.values(CHAIN_NAMESPACES).includes(customChainConfig.chainNamespace)) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Invalid chainNamespace: \".concat(customChainConfig.chainNamespace));\n\n          case 3:\n            finalChainConfig = _objectSpread$1(_objectSpread$1({}, getChainConfig(customChainConfig.chainNamespace, customChainConfig === null || customChainConfig === void 0 ? void 0 : customChainConfig.chainId)), customChainConfig || {});\n\n            if (!(name === WALLET_ADAPTERS.TORUS_EVM)) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.next = 7;\n            return import('@web3auth/torus-evm-adapter');\n\n          case 7:\n            _yield$import = _context.sent;\n            TorusWalletAdapter = _yield$import.TorusWalletAdapter;\n            adapter = new TorusWalletAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", adapter);\n\n          case 13:\n            if (!(name === WALLET_ADAPTERS.TORUS_SOLANA)) {\n              _context.next = 22;\n              break;\n            }\n\n            _context.next = 16;\n            return import('@web3auth/torus-solana-adapter');\n\n          case 16:\n            _yield$import2 = _context.sent;\n            SolanaWalletAdapter = _yield$import2.SolanaWalletAdapter;\n            _adapter = new SolanaWalletAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter);\n\n          case 22:\n            if (!(name === WALLET_ADAPTERS.METAMASK)) {\n              _context.next = 31;\n              break;\n            }\n\n            _context.next = 25;\n            return import('@web3auth/metamask-adapter');\n\n          case 25:\n            _yield$import3 = _context.sent;\n            MetamaskAdapter = _yield$import3.MetamaskAdapter;\n            _adapter2 = new MetamaskAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter2);\n\n          case 31:\n            if (!(name === WALLET_ADAPTERS.PHANTOM)) {\n              _context.next = 40;\n              break;\n            }\n\n            _context.next = 34;\n            return import('@web3auth/phantom-adapter');\n\n          case 34:\n            _yield$import4 = _context.sent;\n            PhantomAdapter = _yield$import4.PhantomAdapter;\n            _adapter3 = new PhantomAdapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter3);\n\n          case 40:\n            if (!(name === WALLET_ADAPTERS.WALLET_CONNECT_V1)) {\n              _context.next = 49;\n              break;\n            }\n\n            _context.next = 43;\n            return import('@web3auth/wallet-connect-v1-adapter');\n\n          case 43:\n            _yield$import5 = _context.sent;\n            WalletConnectV1Adapter = _yield$import5.WalletConnectV1Adapter;\n            _adapter4 = new WalletConnectV1Adapter({\n              chainConfig: finalChainConfig,\n              clientId: clientId\n            });\n            return _context.abrupt(\"return\", _adapter4);\n\n          case 49:\n            if (!(name === WALLET_ADAPTERS.OPENLOGIN)) {\n              _context.next = 58;\n              break;\n            }\n\n            _context.next = 52;\n            return import('@web3auth/openlogin-adapter');\n\n          case 52:\n            _yield$import6 = _context.sent;\n            OpenloginAdapter = _yield$import6.OpenloginAdapter;\n            getOpenloginDefaultOptions = _yield$import6.getOpenloginDefaultOptions;\n            defaultOptions = getOpenloginDefaultOptions(customChainConfig.chainNamespace, customChainConfig === null || customChainConfig === void 0 ? void 0 : customChainConfig.chainId);\n            _adapter5 = new OpenloginAdapter(_objectSpread$1(_objectSpread$1({}, defaultOptions), {}, {\n              chainConfig: _objectSpread$1(_objectSpread$1({}, defaultOptions.chainConfig || {}), finalChainConfig),\n              adapterSettings: _objectSpread$1(_objectSpread$1({}, defaultOptions.adapterSettings), {}, {\n                clientId: clientId\n              })\n            }));\n            return _context.abrupt(\"return\", _adapter5);\n\n          case 58:\n            throw new Error(\"Invalid wallet adapter name\");\n\n          case 59:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getDefaultAdapterModule(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar Web3Auth = /*#__PURE__*/function (_Web3AuthCore) {\n  _inherits(Web3Auth, _Web3AuthCore);\n\n  var _super = _createSuper(Web3Auth);\n\n  function Web3Auth(options) {\n    var _this$options$uiConfi, _this$options$uiConfi2;\n\n    var _this;\n\n    _classCallCheck(this, Web3Auth);\n\n    _this = _super.call(this, options);\n\n    _defineProperty(_assertThisInitialized(_this), \"loginModal\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"options\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"modalConfig\", defaultEvmDappModalConfig);\n\n    _this.options = _objectSpread({}, options);\n    var providedChainConfig = _this.options.chainConfig;\n\n    if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.SOLANA) {\n      if (options.authMode === \"WALLET\") {\n        // default config for solana wallet modal\n        _this.modalConfig = defaultSolanaWalletModalConfig;\n      } else {\n        // default config for solana dapp modal\n        _this.modalConfig = defaultSolanaDappModalConfig;\n      }\n    } else if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.EIP155) {\n      if (options.authMode === \"WALLET\") {\n        // default config for evm wallet modal\n        _this.modalConfig = defaultEvmWalletModalConfig;\n      } else {\n        // default config for evm dapp modal\n        _this.modalConfig = defaultEvmDappModalConfig;\n      }\n    } else if (providedChainConfig.chainNamespace === CHAIN_NAMESPACES.OTHER) {\n      _this.modalConfig = defaultOtherModalConfig;\n    } else {\n      throw new Error(\"Invalid chainNamespace provided: \".concat(providedChainConfig.chainNamespace));\n    }\n\n    _this.loginModal = new LoginModal({\n      theme: (_this$options$uiConfi = _this.options.uiConfig) === null || _this$options$uiConfi === void 0 ? void 0 : _this$options$uiConfi.theme,\n      appLogo: ((_this$options$uiConfi2 = _this.options.uiConfig) === null || _this$options$uiConfi2 === void 0 ? void 0 : _this$options$uiConfi2.appLogo) || \"\",\n      version: \"\",\n      adapterListener: _assertThisInitialized(_this),\n      displayErrorsOnModal: _this.options.displayErrorsOnModal\n    });\n\n    _this.subscribeToLoginModalEvents();\n\n    return _this;\n  }\n\n  _createClass(Web3Auth, [{\n    key: \"initModal\",\n    value: function () {\n      var _initModal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(params) {\n        var _this2 = this;\n\n        var providedChainConfig, allAdapters, adapterConfigurationPromises, adapterNames, hasInAppWallets, initPromises, hasExternalWallets;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _get(_getPrototypeOf(Web3Auth.prototype), \"checkInitRequirements\", this).call(this);\n\n                _context3.next = 3;\n                return this.loginModal.initModal();\n\n              case 3:\n                providedChainConfig = this.options.chainConfig; // merge default adapters with the custom configured adapters.\n\n                allAdapters = _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(this.modalConfig.adapters || {})), _toConsumableArray(Object.keys(this.walletAdapters)))));\n                adapterConfigurationPromises = allAdapters.map( /*#__PURE__*/function () {\n                  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(adapterName) {\n                    var _this2$modalConfig$ad, _params$modalConfig, _this2$modalConfig$ad2, _this2$modalConfig$ad3;\n\n                    var adapterConfig, adapter, ad, _this2$modalConfig$ad4, _this2$coreOptions$ch, chainConfig;\n\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            // start with the default config of adapter.\n                            adapterConfig = ((_this2$modalConfig$ad = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad === void 0 ? void 0 : _this2$modalConfig$ad[adapterName]) || {\n                              label: adapterName,\n                              showOnModal: true,\n                              showOnMobile: true,\n                              showOnDesktop: true\n                            }; // override the default config of adapter if some config is being provided by the user.\n\n                            if (params !== null && params !== void 0 && (_params$modalConfig = params.modalConfig) !== null && _params$modalConfig !== void 0 && _params$modalConfig[adapterName]) {\n                              adapterConfig = _objectSpread(_objectSpread({}, adapterConfig), params.modalConfig[adapterName]);\n                            }\n\n                            _this2.modalConfig.adapters[adapterName] = adapterConfig; // check if adapter is configured/added by user and exist in walletAdapters map.\n\n                            adapter = _this2.walletAdapters[adapterName];\n                            log.debug(\"adapter config\", adapterName, (_this2$modalConfig$ad2 = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad2 === void 0 ? void 0 : _this2$modalConfig$ad2[adapterName].showOnModal, adapter); // if adapter is not custom configured then check if it is available in default adapters.\n                            // and if adapter is not hidden by user\n\n                            if (!(!adapter && (_this2$modalConfig$ad3 = _this2.modalConfig.adapters) !== null && _this2$modalConfig$ad3 !== void 0 && _this2$modalConfig$ad3[adapterName].showOnModal)) {\n                              _context.next = 13;\n                              break;\n                            }\n\n                            _context.next = 8;\n                            return getDefaultAdapterModule({\n                              name: adapterName,\n                              customChainConfig: _this2.options.chainConfig,\n                              clientId: _this2.options.clientId\n                            });\n\n                          case 8:\n                            ad = _context.sent;\n                            _this2.walletAdapters[adapterName] = ad;\n                            return _context.abrupt(\"return\", adapterName);\n\n                          case 13:\n                            if (!((adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.IN_APP || (adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.EXTERNAL || adapterName === _this2.cachedAdapter)) {\n                              _context.next = 19;\n                              break;\n                            }\n\n                            if ((_this2$modalConfig$ad4 = _this2.modalConfig.adapters) !== null && _this2$modalConfig$ad4 !== void 0 && _this2$modalConfig$ad4[adapterName].showOnModal) {\n                              _context.next = 16;\n                              break;\n                            }\n\n                            return _context.abrupt(\"return\");\n\n                          case 16:\n                            // add client id to adapter, same web3auth client id can be used in adapter.\n                            // this id is being overridden if user is also passing client id in adapter's constructor.\n                            _this2.walletAdapters[adapterName].setAdapterSettings({\n                              clientId: _this2.options.clientId,\n                              sessionTime: _this2.options.sessionTime\n                            }); // if adapter doesn't have any chainConfig then we will set the chainConfig based of passed chainNamespace\n                            // and chainNamespace.\n\n\n                            if (!adapter.chainConfigProxy) {\n                              chainConfig = _objectSpread(_objectSpread({}, getChainConfig(providedChainConfig.chainNamespace, (_this2$coreOptions$ch = _this2.coreOptions.chainConfig) === null || _this2$coreOptions$ch === void 0 ? void 0 : _this2$coreOptions$ch.chainId)), _this2.coreOptions.chainConfig);\n\n                              _this2.walletAdapters[adapterName].setChainConfig(chainConfig);\n                            }\n\n                            return _context.abrupt(\"return\", adapterName);\n\n                          case 19:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context3.next = 8;\n                return Promise.all(adapterConfigurationPromises);\n\n              case 8:\n                adapterNames = _context3.sent;\n                hasInAppWallets = Object.values(this.walletAdapters).some(function (adapter) {\n                  var _this2$modalConfig$ad5;\n\n                  if (adapter.type !== ADAPTER_CATEGORY.IN_APP) return false;\n                  if (_this2.modalConfig.adapters[adapter.name].showOnModal !== true) return false;\n                  if (!_this2.modalConfig.adapters[adapter.name].loginMethods) return true;\n                  var mergedLoginMethods = getAdapterSocialLogins(adapter.name, _this2.walletAdapters[adapter.name], (_this2$modalConfig$ad5 = _this2.modalConfig.adapters[adapter.name]) === null || _this2$modalConfig$ad5 === void 0 ? void 0 : _this2$modalConfig$ad5.loginMethods);\n                  if (Object.values(mergedLoginMethods).some(function (method) {\n                    return method.showOnModal;\n                  })) return true;\n                  return false;\n                });\n                log.debug(hasInAppWallets, this.walletAdapters, \"hasInAppWallets\"); // Now, initialize the adapters.\n\n                initPromises = adapterNames.map( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(adapterName) {\n                    var adapter;\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (adapterName) {\n                              _context2.next = 2;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\");\n\n                          case 2:\n                            _context2.prev = 2;\n                            adapter = _this2.walletAdapters[adapterName]; // only initialize a external adapter here if it is a cached adapter.\n\n                            if (!(_this2.cachedAdapter !== adapterName && adapter.type === ADAPTER_CATEGORY.EXTERNAL)) {\n                              _context2.next = 6;\n                              break;\n                            }\n\n                            return _context2.abrupt(\"return\");\n\n                          case 6:\n                            // in-app wallets or cached wallet (being connected or already connected) are initialized first.\n                            // if adapter is configured thn only initialize in app or cached adapter.\n                            // external wallets are initialized on INIT_EXTERNAL_WALLET event.\n                            _this2.subscribeToAdapterEvents(adapter);\n\n                            if (!(adapter.status === ADAPTER_STATUS.NOT_READY)) {\n                              _context2.next = 10;\n                              break;\n                            }\n\n                            _context2.next = 10;\n                            return adapter.init({\n                              autoConnect: _this2.cachedAdapter === adapterName\n                            });\n\n                          case 10:\n                            // note: not adding cachedWallet to modal if it is external wallet.\n                            // adding it later if no in-app wallets are available.\n                            if (adapter.type === ADAPTER_CATEGORY.IN_APP) {\n                              _this2.initializeInAppWallet(adapterName);\n                            }\n\n                            _context2.next = 16;\n                            break;\n\n                          case 13:\n                            _context2.prev = 13;\n                            _context2.t0 = _context2[\"catch\"](2);\n                            log.error(_context2.t0, \"error while initializing adapter\");\n\n                          case 16:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2, null, [[2, 13]]);\n                  }));\n\n                  return function (_x3) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n                this.status = ADAPTER_STATUS.READY;\n                _context3.next = 15;\n                return Promise.all(initPromises);\n\n              case 15:\n                hasExternalWallets = allAdapters.some(function (adapterName) {\n                  var _this2$walletAdapters, _this2$modalConfig$ad6;\n\n                  return ((_this2$walletAdapters = _this2.walletAdapters[adapterName]) === null || _this2$walletAdapters === void 0 ? void 0 : _this2$walletAdapters.type) === ADAPTER_CATEGORY.EXTERNAL && ((_this2$modalConfig$ad6 = _this2.modalConfig.adapters) === null || _this2$modalConfig$ad6 === void 0 ? void 0 : _this2$modalConfig$ad6[adapterName].showOnModal);\n                });\n\n                if (hasExternalWallets) {\n                  this.loginModal.initExternalWalletContainer();\n                } // variable to check if we have any in app wallets\n                // currently all default in app and external wallets can be hidden or shown based on config.\n\n\n                if (!(!hasInAppWallets && hasExternalWallets)) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                _context3.next = 20;\n                return this.initExternalWalletAdapters(false, {\n                  showExternalWalletsOnly: true\n                });\n\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function initModal(_x) {\n        return _initModal.apply(this, arguments);\n      }\n\n      return initModal;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var _this3 = this;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (!this.provider) {\n                  _context4.next = 2;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", this.provider);\n\n              case 2:\n                this.loginModal.open();\n                return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  _this3.once(ADAPTER_EVENTS.CONNECTED, function () {\n                    return resolve(_this3.provider);\n                  });\n\n                  _this3.once(ADAPTER_EVENTS.ERRORED, function (err) {\n                    return reject(err);\n                  });\n                }));\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      return connect;\n    }()\n  }, {\n    key: \"initExternalWalletAdapters\",\n    value: function () {\n      var _initExternalWalletAdapters = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(externalWalletsInitialized, options) {\n        var _this4 = this;\n\n        var adaptersConfig, adaptersData, adapterPromises, adapterInitResults, finalAdaptersConfig;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!externalWalletsInitialized) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\");\n\n              case 2:\n                adaptersConfig = {};\n                adaptersData = {};\n                adapterPromises = Object.keys(this.walletAdapters).map( /*#__PURE__*/function () {\n                  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(adapterName) {\n                    var adapter;\n                    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.prev = 0;\n                            adapter = _this4.walletAdapters[adapterName];\n\n                            if (!((adapter === null || adapter === void 0 ? void 0 : adapter.type) === ADAPTER_CATEGORY.EXTERNAL)) {\n                              _context5.next = 11;\n                              break;\n                            }\n\n                            log.debug(\"init external wallet\", _this4.cachedAdapter, adapterName);\n\n                            _this4.subscribeToAdapterEvents(adapter); // we are not initializing cached adapter here as it is already being initialized in initModal before.\n\n\n                            if (!(_this4.cachedAdapter === adapterName)) {\n                              _context5.next = 7;\n                              break;\n                            }\n\n                            return _context5.abrupt(\"return\");\n\n                          case 7:\n                            if (!(adapter.status === ADAPTER_STATUS.NOT_READY)) {\n                              _context5.next = 11;\n                              break;\n                            }\n\n                            _context5.next = 10;\n                            return Promise.race([adapter.init({\n                              autoConnect: _this4.cachedAdapter === adapterName\n                            }).then(function () {\n                              adaptersConfig[adapterName] = _this4.modalConfig.adapters[adapterName];\n                              adaptersData[adapterName] = adapter.adapterData || {};\n                              return adapterName;\n                            }), new Promise(function (resolve) {\n                              setTimeout(function () {\n                                return resolve(null);\n                              }, 5000);\n                            })]);\n\n                          case 10:\n                            return _context5.abrupt(\"return\", _context5.sent);\n\n                          case 11:\n                            _context5.next = 16;\n                            break;\n\n                          case 13:\n                            _context5.prev = 13;\n                            _context5.t0 = _context5[\"catch\"](0);\n                            log.error(_context5.t0, \"error while initializing adapter\");\n\n                          case 16:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5, null, [[0, 13]]);\n                  }));\n\n                  return function (_x6) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                _context6.next = 7;\n                return Promise.all(adapterPromises);\n\n              case 7:\n                adapterInitResults = _context6.sent;\n                finalAdaptersConfig = {};\n                adapterInitResults.forEach(function (result) {\n                  if (result) {\n                    finalAdaptersConfig[result] = adaptersConfig[result];\n                  }\n                });\n                this.loginModal.addWalletLogins(finalAdaptersConfig, {\n                  showExternalWalletsOnly: !!(options !== null && options !== void 0 && options.showExternalWalletsOnly)\n                });\n\n              case 11:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function initExternalWalletAdapters(_x4, _x5) {\n        return _initExternalWalletAdapters.apply(this, arguments);\n      }\n\n      return initExternalWalletAdapters;\n    }()\n  }, {\n    key: \"initializeInAppWallet\",\n    value: function initializeInAppWallet(adapterName) {\n      log.info(\"adapterInitResults\", adapterName);\n\n      if (this.walletAdapters[adapterName].type === ADAPTER_CATEGORY.IN_APP) {\n        var _this$modalConfig$ada, _this$options$uiConfi3;\n\n        this.loginModal.addSocialLogins(adapterName, getAdapterSocialLogins(adapterName, this.walletAdapters[adapterName], (_this$modalConfig$ada = this.modalConfig.adapters[adapterName]) === null || _this$modalConfig$ada === void 0 ? void 0 : _this$modalConfig$ada.loginMethods), ((_this$options$uiConfi3 = this.options.uiConfig) === null || _this$options$uiConfi3 === void 0 ? void 0 : _this$options$uiConfi3.loginMethodsOrder) || OPENLOGIN_PROVIDERS);\n      }\n    }\n  }, {\n    key: \"subscribeToLoginModalEvents\",\n    value: function subscribeToLoginModalEvents() {\n      var _this5 = this;\n\n      this.loginModal.on(LOGIN_MODAL_EVENTS.LOGIN, /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(params) {\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  _context7.prev = 0;\n                  _context7.next = 3;\n                  return _this5.connectTo(params.adapter, params.loginParams);\n\n                case 3:\n                  _context7.next = 8;\n                  break;\n\n                case 5:\n                  _context7.prev = 5;\n                  _context7.t0 = _context7[\"catch\"](0);\n                  log.error(\"Error while connecting to adapter: \".concat(params.adapter), _context7.t0);\n\n                case 8:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7, null, [[0, 5]]);\n        }));\n\n        return function (_x7) {\n          return _ref4.apply(this, arguments);\n        };\n      }());\n      this.loginModal.on(LOGIN_MODAL_EVENTS.INIT_EXTERNAL_WALLETS, /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(params) {\n          return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  _context8.next = 2;\n                  return _this5.initExternalWalletAdapters(params.externalWalletsInitialized);\n\n                case 2:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        return function (_x8) {\n          return _ref5.apply(this, arguments);\n        };\n      }());\n      this.loginModal.on(LOGIN_MODAL_EVENTS.DISCONNECT, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                _context9.next = 3;\n                return _this5.logout();\n\n              case 3:\n                _context9.next = 8;\n                break;\n\n              case 5:\n                _context9.prev = 5;\n                _context9.t0 = _context9[\"catch\"](0);\n                log.error(\"Error while disconnecting\", _context9.t0);\n\n              case 8:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, null, [[0, 5]]);\n      })));\n      this.loginModal.on(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY, /*#__PURE__*/function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(visibility) {\n          var _this5$walletAdapters;\n\n          var walletConnectStatus;\n          return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  log.debug(\"is login modal visible\", visibility);\n\n                  _this5.emit(LOGIN_MODAL_EVENTS.MODAL_VISIBILITY, visibility);\n\n                  walletConnectStatus = (_this5$walletAdapters = _this5.walletAdapters[WALLET_ADAPTERS.WALLET_CONNECT_V1]) === null || _this5$walletAdapters === void 0 ? void 0 : _this5$walletAdapters.status;\n\n                  if (visibility && walletConnectStatus === ADAPTER_STATUS.READY) {\n                    // refreshing session for wallet connect whenever modal is opened.\n                    try {\n                      _this5.walletAdapters[WALLET_ADAPTERS.WALLET_CONNECT_V1].connect();\n                    } catch (error) {\n                      log.error(\"Error while disconnecting to wallet connect in core\", error);\n                    }\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10);\n        }));\n\n        return function (_x9) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n\n  return Web3Auth;\n}(Web3AuthCore);\n\nexport { Web3Auth, defaultEvmDappModalConfig, defaultEvmWalletModalConfig, defaultOtherModalConfig, defaultSolanaDappModalConfig, defaultSolanaWalletModalConfig };\n//# sourceMappingURL=web3auth.esm.js.map\n"]},"metadata":{},"sourceType":"module"}